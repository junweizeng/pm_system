(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b864f98"],{"0034":function(e,t,n){"use strict";n("eb6c")},1:function(e,t){},"11ca":function(e,t,n){"use strict";n("9f7d")},1995:function(e){e.exports=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/bpmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","camunda:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"camunda:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"},{"name":"modelerTemplateVersion","isAttr":true,"type":"Integer"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["camunda:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","camunda:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","camunda:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["camunda:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true},{"name":"id","type":"String","isAttr":true},{"name":"eventDefinitions","type":"bpmn:TimerEventDefinition","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvents","isAttr":true,"type":"String"}]}],"emumerations":[]}')},2:function(e,t){},2199:function(e){e.exports=JSON.parse('{"name":"Flowable","uri":"http://flowable.org/bpmn","prefix":"flowable","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","flowable:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"flowable:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"},{"name":"localScope","isAttr":true,"type":"Boolean","default":false}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"xcField","isAbstract":true,"properties":[{"name":"xcString","isMany":true,"type":"Element"},{"name":"name","isAttr":true,"type":"String"}]},{"name":"xcString","isAbstract":true,"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"dataType","isAttr":true,"type":"String"},{"name":"assignee","isAttr":true,"type":"String"},{"name":"xcformKey","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"text","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["flowable:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","flowable:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","flowable:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["flowable:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ExtensionElements","properties":[{"name":"operationList","type":"String","isAttr":true}]},{"name":"OperationList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"operationList","type":"FormOperation","isMany":true}]},{"name":"FormOperation","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"showOrder","type":"String","isAttr":true},{"name":"multiSignAssignee","type":"String","isAttr":true}]},{"name":"VariableList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"variableList","type":"FormVariable","isMany":true}]},{"name":"FormVariable","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"DeptPostList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"deptPostList","type":"DeptPost","isMany":true}]},{"name":"DeptPost","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"postId","type":"String","isAttr":true},{"name":"deptPostId","type":"String","isAttr":true}]},{"name":"UserCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"CustomCondition","superClass":["Element"],"meta":{"allowedIn":["bpmn:SequenceFlow"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"operationType","type":"String","isAttr":true},{"name":"parallelRefuse","type":"Boolean","isAttr":true,"default":false}]},{"name":"AssigneeList","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"assigneeList","type":"Assignee","isMany":true},{"name":"type","type":"String","isAttr":true}]},{"name":"Assignee","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}],"emumerations":[]}')},"25bd":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var i=n("b775");function r(e,t){return Object(i["a"])({url:"/workflow/deploy/refApproval/".concat(e),method:"get",params:t})}function s(e){return Object(i["a"])({url:"/system/dict/data/varList",method:"get"})}function a(e){return Object(i["a"])({url:"/common/decrypt",method:"post",data:{encryptStr:e}})}},"33fc":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("h2",[e._v(e._s(e.designerData.title))]),t("process-designer",{directives:[{name:"loading",rawName:"v-loading",value:e.designerData.loading,expression:"designerData.loading"}],key:e.designerData.modelId,ref:"modelDesigner",staticStyle:{border:"1px solid rgba(0, 0, 0, 0.1)"},attrs:{bpmnXml:e.designerData.bpmnXml,designerForm:e.designerData.form},on:{save:e.onSaveDesigner}})],1)},r=[],s=(n("ac1f"),n("5319"),n("d3b7"),n("6282")),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process-design",style:"display: flex; height:"+e.height},[t("bpmn-process-designer",e._b({ref:"processDesigner",attrs:{keyboard:"",events:["element.click","connection.added","connection.removed","connection.changed"]},on:{"element-click":e.elementClick,"init-finished":e.initModeler,event:e.handlerEvent,save:e.onSaveProcess},model:{value:e.xmlString,callback:function(t){e.xmlString=t},expression:"xmlString"}},"bpmn-process-designer",e.controlForm,!1)),t("bmpn-process-penal",{staticClass:"process-panel",attrs:{"bpmn-modeler":e.modeler,prefix:e.controlForm.prefix}})],1)},o=[],l=n("2b0e"),p=(n("7c3b"),n("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-process-designer"},[t("div",{staticClass:"my-process-designer__header"},[e._t("control-header"),e.$slots["control-header"]?e._e():[t("el-button-group",{key:"file-control"},[t("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-edit-outline"},on:{click:e.onSave}},[e._v("保存流程")]),t("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-folder-opened"},on:{click:function(t){return e.$refs.refFile.click()}}},[e._v("打开文件")]),t("el-tooltip",{attrs:{effect:"light"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsXml()}}},[e._v("下载为XML文件")]),t("br"),t("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsSvg()}}},[e._v("下载为SVG文件")]),t("br"),t("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:function(t){return e.downloadProcessAsBpmn()}}},[e._v("下载为BPMN文件")])],1),t("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-download"}},[e._v("下载文件")])],1),t("el-tooltip",{attrs:{effect:"light"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:e.previewProcessXML}},[e._v("预览XML")]),t("br"),t("el-button",{attrs:{size:e.headerButtonSize,type:"text"},on:{click:e.previewProcessJson}},[e._v("预览JSON")])],1),t("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-view"}},[e._v("预览")])],1),e.simulation?t("el-tooltip",{attrs:{effect:"light",content:this.simulationStatus?"退出模拟":"开启模拟"}},[t("el-button",{attrs:{size:e.headerButtonSize,type:e.headerButtonType,icon:"el-icon-cpu"},on:{click:e.processSimulation}},[e._v(" 模拟 ")])],1):e._e()],1),t("el-button-group",{key:"align-control"},[t("el-tooltip",{attrs:{effect:"light",content:"向左对齐"}},[t("el-button",{staticClass:"align align-left",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("left")}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"向右对齐"}},[t("el-button",{staticClass:"align align-right",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("right")}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"向上对齐"}},[t("el-button",{staticClass:"align align-top",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("top")}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"向下对齐"}},[t("el-button",{staticClass:"align align-bottom",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("bottom")}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"水平居中"}},[t("el-button",{staticClass:"align align-center",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("center")}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"垂直居中"}},[t("el-button",{staticClass:"align align-middle",attrs:{size:e.headerButtonSize,icon:"el-icon-s-data"},on:{click:function(t){return e.elementsAlign("middle")}}})],1)],1),t("el-button-group",{key:"scale-control"},[t("el-tooltip",{attrs:{effect:"light",content:"缩小视图"}},[t("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom<=.3,icon:"el-icon-zoom-out"},on:{click:function(t){return e.processZoomOut()}}})],1),t("el-button",{attrs:{size:e.headerButtonSize}},[e._v(e._s(Math.floor(10*this.defaultZoom*10)+"%"))]),t("el-tooltip",{attrs:{effect:"light",content:"放大视图"}},[t("el-button",{attrs:{size:e.headerButtonSize,disabled:e.defaultZoom>=3.9,icon:"el-icon-zoom-in"},on:{click:function(t){return e.processZoomIn()}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"重置视图并居中"}},[t("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-c-scale-to-original"},on:{click:function(t){return e.processReZoom()}}})],1)],1),t("el-button-group",{key:"stack-control"},[t("el-tooltip",{attrs:{effect:"light",content:"撤销"}},[t("el-button",{attrs:{size:e.headerButtonSize,disabled:!e.revocable,icon:"el-icon-refresh-left"},on:{click:function(t){return e.processUndo()}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"恢复"}},[t("el-button",{attrs:{size:e.headerButtonSize,disabled:!e.recoverable,icon:"el-icon-refresh-right"},on:{click:function(t){return e.processRedo()}}})],1),t("el-tooltip",{attrs:{effect:"light",content:"重新绘制"}},[t("el-button",{attrs:{size:e.headerButtonSize,icon:"el-icon-refresh"},on:{click:e.processRestart}})],1)],1)],t("input",{ref:"refFile",staticStyle:{display:"none"},attrs:{type:"file",id:"files",accept:".xml, .bpmn"},on:{change:e.importLocalFile}})],2),t("div",{staticClass:"my-process-designer__container"},[t("div",{ref:"bpmn-canvas",staticClass:"my-process-designer__canvas"})]),t("el-dialog",{attrs:{title:"预览",width:"60%",visible:e.previewModelVisible,"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.previewModelVisible=t}}},[t("highlightjs",{staticStyle:{height:"60vh"},attrs:{language:e.previewType,code:e.previewResult}})],1)],1)}),c=[],m=n("c7eb"),u=n("1da1"),d=n("2909"),f=(n("25f0"),n("14d9"),n("159b"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("99af"),n("d9e2"),n("7024")),b=function(e,t,n){n||(n=i["flowable"]);var i={activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"};return'\n    <?xml version="1.0" encoding="UTF-8"?>\n    <bpmn2:definitions\n      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n      xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"\n      xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n      xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"\n      xmlns:di="http://www.omg.org/spec/DD/20100524/DI"\n      xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n      id="diagram_'.concat(e,'"\n      targetNamespace="').concat(n,'">\n      <bpmn2:process id="').concat(e,'" name="').concat(t,'" isExecutable="true">\n      </bpmn2:process>\n      <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n        <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(e,'">\n        </bpmndi:BPMNPlane>\n      </bpmndi:BPMNDiagram>\n    </bpmn2:definitions>\n  ')};function h(e){return function(t,n){return n=n||{},t=e[t]||t,t.replace(/{([^}]+)}/g,(function(t,i){var r=n[i];return null!==e[n[i]]&&void 0!==e[n[i]]&&(r=e[n[i]]),r||"{"+i+"}"}))}}var y={"Append EndEvent":"追加结束事件","Append Gateway":"追加网关","Append Task":"追加任务","Append Intermediate/Boundary Event":"追加中间抛出事件/边界事件","Activate the global connect tool":"激活全局连接工具","Append {type}":"添加 {type}","Add Lane above":"在上面添加道","Divide into two Lanes":"分割成两个道","Divide into three Lanes":"分割成三个道","Add Lane below":"在下面添加道","Append compensation activity":"追加补偿活动","Change type":"修改类型","Connect using Association":"使用关联连接","Connect using Sequence/MessageFlow or Association":"使用顺序/消息流或者关联连接","Connect using DataInputAssociation":"使用数据输入关联连接",Remove:"移除","Activate the hand tool":"激活抓手工具","Activate the lasso tool":"激活套索工具","Activate the create/remove space tool":"激活创建/删除空间工具","Create expanded SubProcess":"创建扩展子过程","Create IntermediateThrowEvent/BoundaryEvent":"创建中间抛出事件/边界事件","Create Pool/Participant":"创建池/参与者","Parallel Multi Instance":"并行多重事件","Sequential Multi Instance":"时序多重事件",DataObjectReference:"数据对象参考",DataStoreReference:"数据存储参考",Loop:"循环","Ad-hoc":"即席","Create {type}":"创建 {type}",Task:"任务","Send Task":"发送任务","Receive Task":"接收任务","User Task":"用户任务","Manual Task":"手工任务","Business Rule Task":"业务规则任务","Service Task":"服务任务","Script Task":"脚本任务","Call Activity":"调用活动","Sub Process (collapsed)":"子流程（折叠的）","Sub Process (expanded)":"子流程（展开的）","Start Event":"开始事件",StartEvent:"开始事件","Intermediate Throw Event":"中间事件","End Event":"结束事件",EndEvent:"结束事件","Create StartEvent":"创建开始事件","Create EndEvent":"创建结束事件","Create Task":"创建任务","Create User Task":"创建用户任务","Create Gateway":"创建网关","Create DataObjectReference":"创建数据对象","Create DataStoreReference":"创建数据存储","Create Group":"创建分组","Create Intermediate/Boundary Event":"创建中间/边界事件","Message Start Event":"消息开始事件","Timer Start Event":"定时开始事件","Conditional Start Event":"条件开始事件","Signal Start Event":"信号开始事件","Error Start Event":"错误开始事件","Escalation Start Event":"升级开始事件","Compensation Start Event":"补偿开始事件","Message Start Event (non-interrupting)":"消息开始事件（非中断）","Timer Start Event (non-interrupting)":"定时开始事件（非中断）","Conditional Start Event (non-interrupting)":"条件开始事件（非中断）","Signal Start Event (non-interrupting)":"信号开始事件（非中断）","Escalation Start Event (non-interrupting)":"升级开始事件（非中断）","Message Intermediate Catch Event":"消息中间捕获事件","Message Intermediate Throw Event":"消息中间抛出事件","Timer Intermediate Catch Event":"定时中间捕获事件","Escalation Intermediate Throw Event":"升级中间抛出事件","Conditional Intermediate Catch Event":"条件中间捕获事件","Link Intermediate Catch Event":"链接中间捕获事件","Link Intermediate Throw Event":"链接中间抛出事件","Compensation Intermediate Throw Event":"补偿中间抛出事件","Signal Intermediate Catch Event":"信号中间捕获事件","Signal Intermediate Throw Event":"信号中间抛出事件","Message End Event":"消息结束事件","Escalation End Event":"定时结束事件","Error End Event":"错误结束事件","Cancel End Event":"取消结束事件","Compensation End Event":"补偿结束事件","Signal End Event":"信号结束事件","Terminate End Event":"终止结束事件","Message Boundary Event":"消息边界事件","Message Boundary Event (non-interrupting)":"消息边界事件（非中断）","Timer Boundary Event":"定时边界事件","Timer Boundary Event (non-interrupting)":"定时边界事件（非中断）","Escalation Boundary Event":"升级边界事件","Escalation Boundary Event (non-interrupting)":"升级边界事件（非中断）","Conditional Boundary Event":"条件边界事件","Conditional Boundary Event (non-interrupting)":"条件边界事件（非中断）","Error Boundary Event":"错误边界事件","Cancel Boundary Event":"取消边界事件","Signal Boundary Event":"信号边界事件","Signal Boundary Event (non-interrupting)":"信号边界事件（非中断）","Compensation Boundary Event":"补偿边界事件","Exclusive Gateway":"互斥网关","Parallel Gateway":"并行网关","Inclusive Gateway":"相容网关","Complex Gateway":"复杂网关","Event based Gateway":"事件网关",Transaction:"转运","Sub Process":"子流程","Event Sub Process":"事件子流程","Collapsed Pool":"折叠池","Expanded Pool":"展开池","no parent for {element} in {parent}":"在{parent}里，{element}没有父类","no shape type specified":"没有指定的形状类型","flow elements must be children of pools/participants":"流元素必须是池/参与者的子类","out of bounds release":"out of bounds release","more than {count} child lanes":"子道大于{count} ","element required":"元素不能为空","diagram not part of bpmn:Definitions":"流程图不符合bpmn规范","no diagram to display":"没有可展示的流程图","no process or collaboration to display":"没有可展示的流程/协作","element {element} referenced by {referenced}#{property} not yet drawn":"由{referenced}#{property}引用的{element}元素仍未绘制","already rendered {element}":"{element} 已被渲染","failed to import {element}":"导入{element}失败",Id:"编号",Name:"名称",General:"常规",Details:"详情","Message Name":"消息名称",Message:"消息",Initiator:"创建者","Asynchronous Continuations":"持续异步","Asynchronous Before":"异步前","Asynchronous After":"异步后","Job Configuration":"工作配置",Exclusive:"排除","Job Priority":"工作优先级","Retry Time Cycle":"重试时间周期",Documentation:"文档","Element Documentation":"元素文档","History Configuration":"历史配置","History Time To Live":"历史的生存时间",Forms:"表单","Form Key":"表单key","Form Fields":"表单字段","Business Key":"业务key","Form Field":"表单字段",ID:"编号",Type:"类型",Label:"名称","Default Value":"默认值","Default Flow":"默认流转路径","Conditional Flow":"条件流转路径","Sequence Flow":"普通流转路径",Validation:"校验","Add Constraint":"添加约束",Config:"配置",Properties:"属性","Add Property":"添加属性",Value:"值",Listeners:"监听器","Execution Listener":"执行监听","Event Type":"事件类型","Listener Type":"监听器类型","Java Class":"Java类",Expression:"表达式","Must provide a value":"必须提供一个值","Delegate Expression":"代理表达式",Script:"脚本","Script Format":"脚本格式","Script Type":"脚本类型","Inline Script":"内联脚本","External Script":"外部脚本",Resource:"资源","Field Injection":"字段注入",Extensions:"扩展","Input/Output":"输入/输出","Input Parameters":"输入参数","Output Parameters":"输出参数",Parameters:"参数","Output Parameter":"输出参数","Timer Definition Type":"定时器定义类型","Timer Definition":"定时器定义",Date:"日期",Duration:"持续",Cycle:"循环",Signal:"信号","Signal Name":"信号名称",Escalation:"升级",Error:"错误","Link Name":"链接名称",Condition:"条件名称","Variable Name":"变量名称","Variable Event":"变量事件","Specify more than one variable change event as a comma separated list.":"多个变量事件以逗号隔开","Wait for Completion":"等待完成","Activity Ref":"活动参考","Version Tag":"版本标签",Executable:"可执行文件","External Task Configuration":"扩展任务配置","Task Priority":"任务优先级",External:"外部",Connector:"连接器","Must configure Connector":"必须配置连接器","Connector Id":"连接器编号",Implementation:"实现方式","Field Injections":"字段注入",Fields:"字段","Result Variable":"结果变量",Topic:"主题","Configure Connector":"配置连接器","Input Parameter":"输入参数",Assignee:"代理人","Candidate Users":"候选用户","Candidate Groups":"候选组","Due Date":"到期时间","Follow Up Date":"跟踪日期",Priority:"优先级","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00",Variables:"变量","Candidate Starter Configuration":"候选人起动器配置","Candidate Starter Groups":"候选人起动器组","This maps to the process definition key.":"这映射到流程定义键。","Candidate Starter Users":"候选人起动器的用户","Specify more than one user as a comma separated list.":"指定多个用户作为逗号分隔的列表。","Tasklist Configuration":"Tasklist配置",Startable:"启动","Specify more than one group as a comma separated list.":"指定多个组作为逗号分隔的列表。"},g=n("3bf7"),v=n.n(g),S=n("1995"),x=n("da4e"),w=n("2199"),E=n("ba35"),F=n.n(E),k=n("bf96"),T=n.n(k),C=n("9446"),A=n.n(C),I=n("c51a"),O=n.n(I),L={name:"BpmnProcessDesigner",componentName:"BpmnProcessDesigner",props:{value:String,processId:String,processName:String,namespace:String,translations:Object,additionalModel:[Object,Array],moddleExtension:Object,onlyCustomizeAddi:{type:Boolean,default:!1},onlyCustomizeModdle:{type:Boolean,default:!1},simulation:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},prefix:{type:String,default:"flowable"},events:{type:Array,default:function(){return["element.click"]}},headerButtonSize:{type:String,default:"small",validator:function(e){return-1!==["default","medium","small","mini"].indexOf(e)}},headerButtonType:{type:String,default:"primary",validator:function(e){return-1!==["default","primary","success","warning","danger","info"].indexOf(e)}}},data:function(){return{defaultZoom:1,previewModelVisible:!1,simulationStatus:!1,previewResult:"",previewType:"xml",recoverable:!1,revocable:!1}},computed:{additionalModules:function(){var e=[];if(this.onlyCustomizeAddi)return"[object Array]"===Object.prototype.toString.call(this.additionalModel)?this.additionalModel||[]:[this.additionalModel];"[object Array]"===Object.prototype.toString.call(this.additionalModel)?e.push.apply(e,Object(d["a"])(this.additionalModel)):this.additionalModel&&e.push(this.additionalModel);var t={translate:["value",h(this.translations||y)]};return e.push(t),this.simulation&&e.push(v.a),"camunda"===this.prefix&&e.push(F.a),"flowable"===this.prefix&&e.push(A.a),"activiti"===this.prefix&&e.push(T.a),e},moddleExtensions:function(){var e={};if(this.onlyCustomizeModdle)return this.moddleExtension||null;if(this.moddleExtension)for(var t in this.moddleExtension)e[t]=this.moddleExtension[t];return"activiti"===this.prefix&&(e.activiti=x),"flowable"===this.prefix&&(e.flowable=w),"camunda"===this.prefix&&(e.camunda=S),e}},mounted:function(){var e=this;this.initBpmnModeler(),this.createNewDiagram(this.value),this.$once("hook:beforeDestroy",(function(){e.bpmnModeler&&e.bpmnModeler.destroy(),e.$emit("destroy",e.bpmnModeler),e.bpmnModeler=null}))},methods:{onSave:function(){var e=this;return new Promise((function(t,n){null==e.bpmnModeler&&n(),e.bpmnModeler.saveXML({format:!0}).then((function(n){var i=n.xml;e.$emit("save",i),t(i)}))}))},initBpmnModeler:function(){this.bpmnModeler||(this.bpmnModeler=new f["a"]({container:this.$refs["bpmn-canvas"],keyboard:this.keyboard?{bindTo:document}:null,additionalModules:this.additionalModules,moddleExtensions:this.moddleExtensions}),this.$emit("init-finished",this.bpmnModeler),this.initModelListeners())},initModelListeners:function(){var e=this,t=this.bpmnModeler.get("eventBus"),n=this;this.events.forEach((function(e){t.on(e,(function(t){var i=e.replace(/\./g,"-"),r=t?t.element:null;n.$emit(i,r,t),n.$emit("event",i,r,t)}))})),t.on("commandStack.changed",function(){var t=Object(u["a"])(Object(m["a"])().mark((function t(n){var i,r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.recoverable=e.bpmnModeler.get("commandStack").canRedo(),e.revocable=e.bpmnModeler.get("commandStack").canUndo(),t.next=5,e.bpmnModeler.saveXML({format:!0});case 5:i=t.sent,r=i.xml,e.$emit("commandStack-changed",n),e.$emit("input",r),e.$emit("change",r),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error("[Process Designer Warn]: ".concat(t.t0.message||t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()),this.bpmnModeler.on("canvas.viewbox.changed",(function(t){var n=t.viewbox;e.$emit("canvas-viewbox-changed",{viewbox:n});var i=n.scale;e.defaultZoom=Math.floor(100*i)/100}))},createNewDiagram:function(e){var t=this;return Object(u["a"])(Object(m["a"])().mark((function n(){var i,r,s,a,o;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.processId||"Process_".concat((new Date).getTime()),r=t.processName||"业务流程_".concat((new Date).getTime()),s=e||b(i,r,t.namespace),n.prev=3,n.next=6,t.bpmnModeler.importXML(s);case 6:a=n.sent,o=a.warnings,o&&o.length&&o.forEach((function(e){return console.warn(e)})),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),console.error("[Process Designer Warn]: ".concat(n.t0.message||n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},downloadProcess:function(e,t){var n=this;return Object(u["a"])(Object(m["a"])().mark((function i(){var r,s,a,o,l,p,c,u,d,f,b,h,y,g;return Object(m["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(g=function(e,t){if(e&&t){var n=document.createElement("a");n.download=t,n.href=e,n.click(),URL.revokeObjectURL(n.href)}},i.prev=1,r=n,"xml"!==e&&"bpmn"!==e){i.next=14;break}return i.next=6,n.bpmnModeler.saveXML();case 6:s=i.sent,a=s.err,o=s.xml,a&&console.error("[Process Designer Warn ]: ".concat(a.message||a)),l=r.setEncoded(e.toUpperCase(),t,o),p=l.href,c=l.filename,g(p,c),i.next=23;break;case 14:return i.next=16,n.bpmnModeler.saveSVG();case 16:if(u=i.sent,d=u.err,f=u.svg,!d){i.next=21;break}return i.abrupt("return",console.error(d));case 21:b=r.setEncoded("SVG",t,f),h=b.href,y=b.filename,g(h,y);case 23:i.next=28;break;case 25:i.prev=25,i.t0=i["catch"](1),console.error("[Process Designer Warn ]: ".concat(i.t0.message||i.t0));case 28:case"end":return i.stop()}}),i,null,[[1,25]])})))()},setEncoded:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"diagram",n=arguments.length>2?arguments[2]:void 0,i=encodeURIComponent(n);return{filename:"".concat(t,".").concat(e),href:"data:application/".concat("svg"===e?"text/xml":"bpmn20-xml",";charset=UTF-8,").concat(i),data:n}},importLocalFile:function(){var e=this,t=this.$refs.refFile.files[0],n=new FileReader;n.readAsText(t),n.onload=function(){var t=this.result;e.createNewDiagram(t)}},downloadProcessAsXml:function(){this.downloadProcess("xml")},downloadProcessAsBpmn:function(){this.downloadProcess("bpmn")},downloadProcessAsSvg:function(){this.downloadProcess("svg")},processSimulation:function(){this.simulationStatus=!this.simulationStatus,this.simulation&&this.bpmnModeler.get("toggleMode").toggleMode()},processRedo:function(){this.bpmnModeler.get("commandStack").redo()},processUndo:function(){this.bpmnModeler.get("commandStack").undo()},processZoomIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom+100*e)/100;if(t>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=Math.floor(100*this.defaultZoom-100*e)/100;if(t<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");this.defaultZoom=t,this.bpmnModeler.get("canvas").zoom(this.defaultZoom)},processZoomTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");if(e>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");this.defaultZoom=e,this.bpmnModeler.get("canvas").zoom(e)},processReZoom:function(){this.defaultZoom=1,this.bpmnModeler.get("canvas").zoom("fit-viewport","auto")},processRestart:function(){var e=this;this.recoverable=!1,this.revocable=!1,this.createNewDiagram(null).then((function(){return e.bpmnModeler.get("canvas").zoom(1,"auto")}))},elementsAlign:function(e){var t=this.bpmnModeler.get("alignElements"),n=this.bpmnModeler.get("selection"),i=n.get();!i||i.length<=1?this.$message.warning("请按住 Ctrl 键选择多个元素对齐"):this.$confirm("自动对齐可能造成图形变形，是否继续？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.trigger(i,e)}))},previewProcessXML:function(){var e=this;this.bpmnModeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.previewResult=n,e.previewType="xml",e.previewModelVisible=!0}))},previewProcessJson:function(){var e=this;this.bpmnModeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.previewResult=O.a.xml2json(n,{spaces:2}),e.previewType="json",e.previewModelVisible=!0}))}}},M=L,D=n("2877"),P=Object(D["a"])(M,p,c,!1,null,null,null),_=P.exports;_.install=function(e){e.component(_.name,_)};var j=_,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"process-panel__container",style:{width:"".concat(this.width,"px")}},[t("el-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-collapse-item",{attrs:{name:"base"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-info"}),e._v("常规")]),t("element-base-info",{attrs:{"id-edit-disabled":e.idEditDisabled,"business-object":e.elementBusinessObject,type:e.elementType}})],1),"Process"===e.elementType?t("el-collapse-item",{key:"message",attrs:{name:"condition"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-comment"}),e._v("消息与信号")]),t("signal-and-massage")],1):e._e(),e.conditionFormVisible?t("el-collapse-item",{key:"condition",attrs:{name:"condition"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-promotion"}),e._v("流转条件")]),t("flow-condition",{attrs:{"business-object":e.elementBusinessObject,type:e.elementType}})],1):e._e(),e.formVisible?t("el-collapse-item",{key:"form",attrs:{name:"condition"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-order"}),e._v("表单")]),t("element-form",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),-1!==e.elementType.indexOf("Task")?t("el-collapse-item",{key:"task",attrs:{name:"task"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-claim"}),e._v("任务")]),t("element-task",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),-1!==e.elementType.indexOf("Task")&&"UserTask"!==e.elementType?t("el-collapse-item",{key:"multiInstance",attrs:{name:"multiInstance"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-help"}),e._v("多实例")]),t("element-multi-instance",{attrs:{"business-object":e.elementBusinessObject,type:e.elementType}})],1):e._e(),t("el-collapse-item",{key:"listeners",attrs:{name:"listeners"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-message-solid"}),e._v("执行监听器")]),t("element-listeners",{attrs:{id:e.elementId,type:e.elementType}})],1),"UserTask"===e.elementType?t("el-collapse-item",{key:"taskListeners",attrs:{name:"taskListeners"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-message-solid"}),e._v("任务监听器")]),t("user-task-listeners",{attrs:{id:e.elementId,type:e.elementType}})],1):e._e(),t("el-collapse-item",{key:"extensions",attrs:{name:"extensions"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-circle-plus"}),e._v("扩展属性")]),t("element-properties",{attrs:{id:e.elementId,type:e.elementType}})],1),t("el-collapse-item",{key:"other",attrs:{name:"other"}},[t("div",{staticClass:"panel-tab__title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-s-promotion"}),e._v("其他")]),t("element-other-config",{attrs:{id:e.elementId}})],1)],1)],1)},$=[],R=(n("a9e3"),n("7db0"),n("b64b"),n("e9c4"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"ID"}},[t("el-input",{attrs:{disabled:e.idEditDisabled||"bpmn:Process"===e.elementBaseInfo.$type,clearable:""},on:{change:function(t){return e.updateBaseInfo("id")}},model:{value:e.elementBaseInfo.id,callback:function(t){e.$set(e.elementBaseInfo,"id",t)},expression:"elementBaseInfo.id"}})],1),t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("name")}},model:{value:e.elementBaseInfo.name,callback:function(t){e.$set(e.elementBaseInfo,"name",t)},expression:"elementBaseInfo.name"}})],1),"bpmn:Process"===e.elementBaseInfo.$type?[t("el-form-item",{attrs:{label:"版本标签"}},[t("el-input",{attrs:{clearable:""},on:{change:function(t){return e.updateBaseInfo("versionTag")}},model:{value:e.elementBaseInfo.versionTag,callback:function(t){e.$set(e.elementBaseInfo,"versionTag",t)},expression:"elementBaseInfo.versionTag"}})],1),t("el-form-item",{attrs:{label:"可执行"}},[t("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},on:{change:function(t){return e.updateBaseInfo("isExecutable")}},model:{value:e.elementBaseInfo.isExecutable,callback:function(t){e.$set(e.elementBaseInfo,"isExecutable",t)},expression:"elementBaseInfo.isExecutable"}})],1)]:e._e()],2)],1)}),N=[],V={name:"ElementBaseInfo",props:{businessObject:Object,type:String,idEditDisabled:{type:Boolean,default:!0}},data:function(){return{elementBaseInfo:{}}},watch:{businessObject:{immediate:!1,handler:function(e){var t=this;e&&this.$nextTick((function(){return t.resetBaseInfo()}))}}},methods:{resetBaseInfo:function(){var e;this.bpmnElement=null===(e=window)||void 0===e||null===(e=e.bpmnInstances)||void 0===e?void 0:e.bpmnElement,this.elementBaseInfo=JSON.parse(JSON.stringify(this.bpmnElement.businessObject))},updateBaseInfo:function(e){var t=Object.create(null);t[e]=this.elementBaseInfo[e],"id"===e?window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{id:this.elementBaseInfo[e],di:{id:"".concat(this.elementBaseInfo[e],"_di")}}):window.bpmnInstances.modeling.updateProperties(this.bpmnElement,t)}},beforeDestroy:function(){this.bpmnElement=null}},z=V,U=Object(D["a"])(z,R,N,!1,null,null,null),q=U.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("div",{staticClass:"element-property input-property"},[t("div",{staticClass:"element-property__label"},[e._v("元素文档：")]),t("div",{staticClass:"element-property__value"},[t("el-input",{attrs:{type:"textarea",size:"mini",resize:"vertical",autosize:{minRows:2,maxRows:4}},on:{input:e.updateDocumentation,blur:e.updateDocumentation},model:{value:e.documentation,callback:function(t){e.documentation=t},expression:"documentation"}})],1)])])},G=[],K={name:"ElementOtherConfig",props:{id:String},data:function(){return{documentation:""}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length?this.$nextTick((function(){var e,n=null===(e=window.bpmnInstances.bpmnElement.businessObject)||void 0===e?void 0:e.documentation;t.documentation=n&&n.length?n[0].text:""})):this.documentation=""}}},methods:{updateDocumentation:function(){this.bpmnElement&&this.bpmnElement.id===this.id||(this.bpmnElement=window.bpmnInstances.elementRegistry.get(this.id));var e=window.bpmnInstances.bpmnFactory.create("bpmn:Documentation",{text:this.documentation});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{documentation:[e]})}},beforeDestroy:function(){this.bpmnElement=null}},X=K,Z=Object(D["a"])(X,J,G,!1,null,null,null),H=Z.exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(e.witchTaskComponent,e._b({tag:"component"},"component",e.$props,!1))],1)],1)},Q=[],Y=n("5530"),ee=(n("498a"),function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("h4",[t("b",[e._v("审批人设置")])]),t("el-radio-group",{on:{change:e.changeDataType},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},[t("el-radio",{attrs:{label:"USERS"}},[e._v("指定用户")]),t("el-radio",{attrs:{label:"ROLES"}},[e._v("角色")]),t("el-radio",{attrs:{label:"DEPTS"}},[e._v("部门")]),t("el-radio",{attrs:{label:"INITIATOR"}},[e._v("发起人")]),t("el-radio",{attrs:{label:"VAR"}},[e._v("变量")])],1)],1),t("el-row",["USERS"===e.dataType?t("div",[e._l(e.selectedUser.text,(function(n){return t("el-tag",{key:n,attrs:{effect:"plain"}},[e._v(" "+e._s(n)+" ")])})),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.onSelectUsers()}}},[e._v("添加用户")])],1)],2):e._e(),"ROLES"===e.dataType?t("div",[t("el-select",{attrs:{multiple:"",size:"mini",placeholder:"请选择 角色"},on:{change:e.changeSelectRoles},model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.roleOptions,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:"ROLE".concat(e.roleId),disabled:1===e.status}})})),1)],1):e._e(),"DEPTS"===e.dataType?t("div",[t("tree-select",{attrs:{width:320,height:400,size:"mini",data:e.deptTreeData,defaultProps:e.deptProps,multiple:"",clearable:"",checkStrictly:"",nodeKey:"id",checkedKeys:e.deptIds},on:{change:e.checkedDeptChange}})],1):e._e(),"VAR"===e.dataType?t("div",{staticClass:"var"},[t("el-input",{attrs:{placeholder:"${变量名}",size:"mini"},on:{input:e.changeVar},model:{value:e.variable,callback:function(t){e.variable="string"===typeof t?t.trim():t},expression:"variable"}},[t("el-select",{attrs:{slot:"append",placeholder:"内置变量",filterable:""},on:{change:e.changeVar},slot:"append",model:{value:e.variable,callback:function(t){e.variable=t},expression:"variable"}},e._l(e.variableList,(function(e,n){return t("el-option",{key:n,attrs:{label:e.varKey,value:e.varValue}})})),1)],1)],1):e._e()]),t("el-row",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showMultiFlog,expression:"showMultiFlog"}]},[t("el-divider"),t("h4",[t("b",[e._v("多实例审批方式")])]),t("el-row",[t("el-radio-group",{on:{change:function(t){return e.changeMultiLoopType()}},model:{value:e.multiLoopType,callback:function(t){e.multiLoopType=t},expression:"multiLoopType"}},[t("el-row",{directives:[{name:"show",rawName:"v-show",value:"VAR"!==e.dataType,expression:"dataType !== 'VAR'"}]},[t("el-radio",{attrs:{label:"Null"}},[e._v("无")])],1),t("el-row",[t("el-radio",{attrs:{label:"SequentialMultiInstance"}},[e._v("会签（需所有审批人同意）")])],1),t("el-row",[t("el-radio",{attrs:{label:"ParallelMultiInstance"}},[e._v("或签（一名审批人同意即可）")])],1)],1)],1),"Null"!==e.multiLoopType?t("el-row",[t("el-tooltip",{attrs:{content:"开启后，实例需按顺序轮流审批",placement:"top-start"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[t("i",{staticClass:"header-icon el-icon-info"})]),t("span",{staticClass:"custom-label"},[e._v("顺序审批：")]),t("el-switch",{on:{change:function(t){return e.changeMultiLoopType()}},model:{value:e.isSequential,callback:function(t){e.isSequential=t},expression:"isSequential"}})],1):e._e()],1)]),t("el-dialog",{attrs:{title:"候选用户",visible:e.userOpen,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.userOpen=t}}},[t("el-row",{attrs:{type:"flex",gutter:20}},[t("el-col",{attrs:{span:7}},[t("el-card",{staticStyle:{height:"100%"},attrs:{shadow:"never"}},[t("div",{staticClass:"head-container"},[t("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"筛选用户",clearable:"",size:"small","prefix-icon":"el-icon-search"},on:{input:e.getUserList},model:{value:e.queryParams.nickName,callback:function(t){e.$set(e.queryParams,"nickName","string"===typeof t?t.trim():t)},expression:"queryParams.nickName"}}),t("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.deptProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)])],1),t("el-col",{attrs:{span:17}},[t("el-table",{ref:"multipleTable",attrs:{height:"600",data:e.userTableList,border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t("el-table-column",{attrs:{label:"用户名",align:"center",prop:"nickName"}}),t("el-table-column",{attrs:{label:"部门",align:"center",prop:"dept.deptName"}})],1),t("pagination",{attrs:{total:e.userTotal,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getUserList}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-card",{staticStyle:{"margin-bottom":"20px","text-align":"left"},attrs:{shadow:"never"}},[e._v(" 当前已选用户（点击列表即可选择）： "),e._l(e.selectedUserDate,(function(n,i){return t("el-tag",{key:i,staticStyle:{margin:"2px"},attrs:{closable:""},on:{close:function(t){return e.removeSelectedUserData(i)}}},[e._v(" "+e._s(n.nickName)+" ")])}))],2),t("el-button",{attrs:{type:"primary"},on:{click:e.handleTaskUserComplete}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.userOpen=!1}}},[e._v("取 消")])],1)],1)],1)}),te=[],ne=(n("d81d"),n("a434"),n("a15b"),n("4de4"),n("c0c7")),ie=n("3528"),re=n("25bd"),se=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelect,expression:"isShowSelect"}],staticClass:"mask",on:{click:function(t){e.isShowSelect=!e.isShowSelect}}}),t("el-popover",{attrs:{placement:"bottom-start",width:e.width,trigger:"manual"},on:{hide:e.popoverHide},model:{value:e.isShowSelect,callback:function(t){e.isShowSelect=t},expression:"isShowSelect"}},[t("el-select",{ref:"select",staticClass:"tree-select",attrs:{slot:"reference",size:e.size,multiple:e.multiple,clearable:e.clearable,"collapse-tags":e.collapseTags},on:{"remove-tag":e.removeSelectedNodes,clear:e.removeSelectedNode,change:e.changeSelectedNodes},nativeOn:{click:function(t){e.isShowSelect=!e.isShowSelect}},slot:"reference",model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-tree",{ref:"tree",staticClass:"common-tree",style:"width: 100%; ".concat(e.height,"px"),attrs:{data:e.data,props:e.defaultProps,"show-checkbox":e.multiple,"node-key":e.nodeKey,"check-strictly":e.checkStrictly,"default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":e.multiple,"highlight-current":!0},on:{"node-click":e.handleNodeClick,"check-change":e.handleCheckChange}})],1)],1)},ae=[],oe={name:"tree-select",props:{data:{type:Array,default:function(){return[]}},defaultProps:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:function(){return!1}},clearable:{type:Boolean,default:function(){return!1}},collapseTags:{type:Boolean,default:function(){return!1}},nodeKey:{type:String,default:function(){return"id"}},checkStrictly:{type:Boolean,default:function(){return!1}},checkedKeys:{type:Array,default:function(){return[]}},size:{type:String,default:function(){return"small"}},width:{type:Number,default:function(){return 250}},height:{type:Number,default:function(){return 300}}},data:function(){return{isShowSelect:!1,options:[],selectedData:[],style:"width:"+this.width+"px;height:"+this.height+"px;",selectStyle:"width:"+(this.width+24)+"px;",checkedIds:[],checkedData:[]}},mounted:function(){this.initCheckedData()},methods:{setSelectOption:function(e){var t={};t.value=e.key,t.label=e.label,this.options=[],this.options.push(t),this.selectedData=e.key},checkSelectedNode:function(e){var t=e[0];this.$refs.tree.setCurrentKey(t);var n=this.$refs.tree.getNode(t);this.setSelectOption(n)},checkSelectedNodes:function(e){this.$refs.tree.setCheckedKeys(e)},clearSelectedNode:function(){this.$refs.tree.setCurrentKey(null)},clearSelectedNodes:function(){for(var e=this.$refs.tree.getCheckedKeys(),t=0;t<e.length;t++)this.$refs.tree.setChecked(e[t],!1)},initCheckedData:function(){this.multiple?this.checkedKeys.length>0?(this.selectedData=this.checkedKeys,this.checkSelectedNodes(this.checkedKeys)):(this.selectedData="",this.clearSelectedNodes()):this.checkedKeys.length>0?(this.selectedData=this.checkedKeys[0],this.checkSelectedNode(this.checkedKeys)):(this.selectedData="",this.clearSelectedNode())},a2b:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return e.map((function(e){var t={id:"",text:""};return e.children&&e.children.length>0?(t.id=e.value,t.text=e.label,t.arr=a2b(e.children),t):(t.id=e.value,t.text=e.label,t)}))})),popoverHide:function(){this.multiple?(this.checkedIds=this.$refs.tree.getCheckedKeys(),this.checkedData=this.$refs.tree.getCheckedNodes()):(this.checkedIds=this.$refs.tree.getCurrentKey(),this.checkedData=this.$refs.tree.getCurrentNode()),this.$emit("checked-change",this.checkedIds,this.checkedData)},handleNodeClick:function(e,t){this.multiple||(this.setSelectOption(t),this.isShowSelect=!this.isShowSelect,this.$emit("change",this.selectedData))},handleCheckChange:function(){var e=this,t=this.$refs.tree.getCheckedKeys();this.options=t.map((function(t){var n=e.$refs.tree.getNode(t),i={};return i.value=n.key,i.label=n.label,i})),this.selectedData=this.options.map((function(e){return e.value})),this.$emit("change",this.selectedData)},removeSelectedNodes:function(e){var t=this;this.$refs.tree.setChecked(e,!1);var n=this.$refs.tree.getNode(e);!this.checkStrictly&&n.childNodes.length>0&&(this.treeToList(n).map((function(e){e.childNodes.length<=0&&t.$refs.tree.setChecked(e,!1)})),this.handleCheckChange()),this.$emit("change",this.selectedData)},treeToList:function(e){var t=[],n=[];t=t.concat(e);while(t.length){var i=t.shift();i.childNodes&&(t=t.concat(i.childNodes)),n.push(i)}return n},removeSelectedNode:function(){this.clearSelectedNode(),this.$emit("change",this.selectedData)},changeSelectedNodes:function(e){this.multiple&&e.length<=0&&this.clearSelectedNodes(),this.$emit("change",this.selectedData)}},watch:{isShowSelect:function(e){this.$refs.select.blur()},checkedKeys:function(e){e&&(this.checkedKeys=e,this.initCheckedData())}}},le=oe,pe=(n("11ca"),Object(D["a"])(le,se,ae,!1,null,"37946ae2",null)),ce=pe.exports,me={dataType:"",assignee:"",candidateUsers:"",candidateGroups:"",text:""},ue={name:"UserTask",props:{id:String,type:String},components:{TreeSelect:ce},data:function(){return{loading:!1,dataType:"USERS",selectedUser:{ids:[],text:[]},userOpen:!1,deptName:void 0,deptOptions:[],deptProps:{children:"children",label:"label"},deptTempOptions:[],userTableList:[],userTotal:0,selectedUserDate:[],roleOptions:[],roleIds:[],deptTreeData:[],deptIds:[],variable:void 0,variableList:[],queryParams:{pageNum:1,pageSize:10,nickName:void 0,deptId:void 0},showMultiFlog:!1,isSequential:!1,multiLoopType:"Null"}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},mounted:function(){var e=this;Object(re["c"])().then((function(t){e.variableList=t.data}))},beforeDestroy:function(){this.bpmnElement=null},methods:{resetTaskForm:function(){var e,t=this,n=null===(e=this.bpmnElement)||void 0===e?void 0:e.businessObject;if(n){if(this.clearOptionsData(),this.dataType=n["dataType"],"USERS"===this.dataType){var i=n["candidateUsers"]||n["assignee"],r=n["text"]||[];i&&i.toString().length>0&&r&&r.length>0&&(this.selectedUser.ids=null===i||void 0===i?void 0:i.toString().split(","),this.selectedUser.text=null===r||void 0===r?void 0:r.split(",")),this.selectedUser.ids.length>1&&(this.showMultiFlog=!0)}else if("ROLES"===this.dataType){this.getRoleOptions();var s=n["candidateGroups"]||[];s&&s.length>0&&(this.roleIds=s.split(",")),this.showMultiFlog=!0}else"DEPTS"===this.dataType?(this.getDeptTreeData().then((function(){var e=n["candidateGroups"]||[];e&&e.length>0&&(t.deptIds=e.split(","))})),this.showMultiFlog=!0):"VAR"===this.dataType&&(this.variable=n["loopCharacteristics"]["collection"],this.showMultiFlog=!0);this.getElementLoop(n)}},clearOptionsData:function(){this.selectedUser.ids=[],this.selectedUser.text=[],this.roleIds=[],this.deptIds=[],this.variable=void 0},updateElementTask:function(){var e=Object.create(null);for(var t in me)e[t]=me[t];window.bpmnInstances.modeling.updateProperties(this.bpmnElement,e)},getDeptOptions:function(){var e=this;return new Promise((function(t,n){!e.deptOptions||e.deptOptions.length<=0?Object(ne["d"])().then((function(n){e.deptTempOptions=n.data,e.deptOptions=n.data,t()})):n()}))},getDeptTreeData:function(){var e=this;function t(e){return e.map((function(e){var n={id:"DEPT".concat(e.id),label:e.label,parentId:e.parentId,weight:e.weight};return e.children&&e.children.length>0&&(n.children=t(e.children)),n}))}return new Promise((function(n,i){!e.deptTreeData||e.deptTreeData.length<=0?e.getDeptOptions().then((function(){e.deptTreeData=t(e.deptOptions),n()})).catch((function(){i()})):n()}))},getRoleOptions:function(){var e=this;(!this.roleOptions||this.roleOptions.length<=0)&&Object(ie["k"])().then((function(t){return e.roleOptions=t.rows}))},getUserList:function(){var e=this;this.queryParams.nickName&&(this.queryParams.deptId=void 0),Object(ne["h"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.userTableList=t.rows,e.userTotal=t.total}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.queryParams.deptId=e.id,this.getUserList()},handleClose:function(e){this.selectedUserDate.splice(this.selectedUserDate.indexOf(e),1),this.$refs.multipleTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.selectedUserDate=e},handleRowClick:function(e){this.selectedUserDate.push(e),this.selectedUserDate=this.noRepeat(this.selectedUserDate)},noRepeat:function(e){for(var t=JSON.parse(JSON.stringify(e)),n=0;n<t.length-1;n++)for(var i=n+1;i<t.length;i++)t[n].userId===t[i].userId&&(t.splice(i,1),i--);return t},removeSelectedUserData:function(e){this.selectedUserDate.splice(e,1)},onSelectUsers:function(){var e;this.selectedUserDate=[],null===(e=this.$refs.multipleTable)||void 0===e||e.clearSelection(),this.getDeptOptions(),this.getUserList(),this.userOpen=!0},handleTaskUserComplete:function(){if(!this.selectedUserDate||this.selectedUserDate.length<=0)this.$modal.msgError("请选择用户");else{if(me.dataType="USERS",this.selectedUser.text=this.selectedUserDate.map((function(e){return e.nickName}))||[],this.selectedUser.ids=this.selectedUserDate.map((function(e){return e.userId}))||[],1===this.selectedUserDate.length){var e=this.selectedUserDate[0];me.assignee=e.userId,me.text=e.nickName,me.candidateUsers=null,this.showMultiFlog=!1,this.multiLoopType="Null",this.changeMultiLoopType()}else me.candidateUsers=this.selectedUserDate.map((function(e){return e.userId})).join()||null,me.text=this.selectedUserDate.map((function(e){return e.nickName})).join()||null,me.assignee=null,this.showMultiFlog=!0;this.updateElementTask(),this.userOpen=!1}},changeSelectRoles:function(e){var t=null,n=null;if(e&&e.length>0){me.dataType="ROLES",t=e.join()||null;var i=this.roleOptions.filter((function(t){return e.indexOf("ROLE".concat(t.roleId))>=0}));n=(null===i||void 0===i?void 0:i.map((function(e){return e.roleName})).join())||null}else me.dataType=null,this.multiLoopType="Null";me.candidateGroups=t,me.text=n,this.updateElementTask(),this.changeMultiLoopType()},checkedDeptChange:function(e){var t=null,n=null;if(this.deptIds=e,e&&e.length>0){me.dataType="DEPTS",t=e.join()||null;var i=[],r=JSON.parse(JSON.stringify(this.deptTreeData));e.forEach((function(e){var t=[];t=t.concat(r);while(t.length){var n=t.shift();n.children&&(t=n.children.concat(t)),e===n.id&&i.push(n)}})),n=(null===i||void 0===i?void 0:i.map((function(e){return e.label})).join())||null}else me.dataType=null,this.multiLoopType="Null";me.candidateGroups=t,me.text=n,this.updateElementTask(),this.changeMultiLoopType()},changeVar:function(e){e.length>0?(me.dataType="VAR",me.text="变量"):(me.dataType=null,this.multiLoopType="Null"),this.updateElementTask(),this.changeMultiLoopType()},changeDataType:function(e){var t,n=this;if("ROLES"===e||"DEPTS"===e||"USERS"===e&&this.selectedUser.ids.length>1?(this.showMultiFlog=!0,this.multiLoopType="Null"):"VAR"===e?(this.showMultiFlog=!0,this.multiLoopType="SequentialMultiInstance"):(this.showMultiFlog=!1,this.multiLoopType="Null"),this.changeMultiLoopType(),Object.keys(me).forEach((function(e){return me[e]=null})),me.dataType=e,"USERS"===e)this.selectedUser&&this.selectedUser.ids&&this.selectedUser.ids.length>0&&(1===this.selectedUser.ids.length?me.assignee=this.selectedUser.ids[0]:me.candidateUsers=this.selectedUser.ids.join(),me.text=(null===(t=this.selectedUser.text)||void 0===t?void 0:t.join())||null);else if("ROLES"===e){if(this.getRoleOptions(),this.roleIds&&this.roleIds.length>0){me.candidateGroups=this.roleIds.join()||null;var i=this.roleOptions.filter((function(e){return n.roleIds.indexOf("ROLE".concat(e.roleId))>=0}));me.text=(null===i||void 0===i?void 0:i.map((function(e){return e.roleName})).join())||null}}else if("DEPTS"===e){if(this.getDeptTreeData(),this.deptIds&&this.deptIds.length>0){me.candidateGroups=this.deptIds.join()||null;var r=[],s=JSON.parse(JSON.stringify(this.deptTreeData));this.deptIds.forEach((function(e){var t=[];t=t.concat(s);while(t.length){var n=t.shift();n.children&&(t=n.children.concat(t)),e===n.id&&r.push(n)}})),me.text=(null===r||void 0===r?void 0:r.map((function(e){return e.label})).join())||null}}else"INITIATOR"===e?(me.assignee="${initiator}",me.text="流程发起人"):"VAR"===e&&(me.text="变量");this.updateElementTask()},getElementLoop:function(e){e.loopCharacteristics?(this.isSequential=e.loopCharacteristics.isSequential,e.loopCharacteristics.completionCondition&&("${nrOfCompletedInstances >= nrOfInstances}"===e.loopCharacteristics.completionCondition.body?this.multiLoopType="SequentialMultiInstance":this.multiLoopType="ParallelMultiInstance")):this.multiLoopType="Null"},changeMultiLoopType:function(){if("Null"!==this.multiLoopType){this.multiLoopInstance=window.bpmnInstances.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:this.isSequential}),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:this.multiLoopInstance,assignee:"${assignee}"});var e=null;"SequentialMultiInstance"===this.multiLoopType&&(e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances >= nrOfInstances}"})),"ParallelMultiInstance"===this.multiLoopType&&(e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances > 0}"})),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{collection:"VAR"===this.dataType?this.variable:"${multiInstanceHandler.getUserIds(execution)}",elementVariable:"assignee",completionCondition:e})}else window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:null,assignee:null})}}},de=ue,fe=(n("d468"),Object(D["a"])(de,ee,te,!1,null,"29b40e2c",null)),be=fe.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"16px"}},[t("el-form-item",{attrs:{label:"脚本格式"}},[t("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.scriptFormat,callback:function(t){e.$set(e.scriptTaskForm,"scriptFormat",t)},expression:"scriptTaskForm.scriptFormat"}})],1),t("el-form-item",{attrs:{label:"脚本类型"}},[t("el-select",{model:{value:e.scriptTaskForm.scriptType,callback:function(t){e.$set(e.scriptTaskForm,"scriptType",t)},expression:"scriptTaskForm.scriptType"}},[t("el-option",{attrs:{label:"内联脚本",value:"inline"}}),t("el-option",{attrs:{label:"外部资源",value:"external"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"inline"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'inline'"}],attrs:{label:"脚本"}},[t("el-input",{attrs:{type:"textarea",resize:"vertical",autosize:{minRows:2,maxRows:4},clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.script,callback:function(t){e.$set(e.scriptTaskForm,"script",t)},expression:"scriptTaskForm.script"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"external"===e.scriptTaskForm.scriptType,expression:"scriptTaskForm.scriptType === 'external'"}],attrs:{label:"资源地址"}},[t("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resource,callback:function(t){e.$set(e.scriptTaskForm,"resource",t)},expression:"scriptTaskForm.resource"}})],1),t("el-form-item",{attrs:{label:"结果变量"}},[t("el-input",{attrs:{clearable:""},on:{input:function(t){return e.updateElementTask()},change:function(t){return e.updateElementTask()}},model:{value:e.scriptTaskForm.resultVariable,callback:function(t){e.$set(e.scriptTaskForm,"resultVariable",t)},expression:"scriptTaskForm.resultVariable"}})],1)],1)},ye=[],ge={name:"ScriptTask",props:{id:String,type:String},data:function(){return{defaultTaskForm:{scriptFormat:"",script:"",resource:"",resultVariable:""},scriptTaskForm:{}}},watch:{id:{immediate:!0,handler:function(){var e=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.$nextTick((function(){return e.resetTaskForm()}))}}},methods:{resetTaskForm:function(){for(var e in this.defaultTaskForm){var t,n=(null===(t=this.bpmnElement)||void 0===t?void 0:t.businessObject[e])||this.defaultTaskForm[e];this.$set(this.scriptTaskForm,e,n)}this.$set(this.scriptTaskForm,"scriptType",this.scriptTaskForm.script?"inline":"external")},updateElementTask:function(){var e=Object.create(null);e.scriptFormat=this.scriptTaskForm.scriptFormat||null,e.resultVariable=this.scriptTaskForm.resultVariable||null,"inline"===this.scriptTaskForm.scriptType?(e.script=this.scriptTaskForm.script||null,e.resource=null):(e.resource=this.scriptTaskForm.resource||null,e.script=null),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,e)}},beforeDestroy:function(){this.bpmnElement=null}},ve=ge,Se=Object(D["a"])(ve,he,ye,!1,null,null,null),xe=Se.exports,we=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"16px"}},[t("el-form-item",{attrs:{label:"消息实例"}},[t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-wrap":"nowrap"}},[t("el-select",{on:{change:e.updateTaskMessage},model:{value:e.bindMessageId,callback:function(t){e.bindMessageId=t},expression:"bindMessageId"}},e._l(Object.keys(e.messageMap),(function(n){return t("el-option",{key:n,attrs:{value:n,label:e.messageMap[n]}})})),1),t("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.openMessageModel}})],1)]),t("el-dialog",{attrs:{visible:e.messageModelVisible,"close-on-click-modal":!1,title:"创建新消息",width:"400px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.messageModelVisible=t}}},[t("el-form",{attrs:{model:e.newMessageForm,size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"消息ID"}},[t("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.id,callback:function(t){e.$set(e.newMessageForm,"id",t)},expression:"newMessageForm.id"}})],1),t("el-form-item",{attrs:{label:"消息名称"}},[t("el-input",{attrs:{clearable:""},model:{value:e.newMessageForm.name,callback:function(t){e.$set(e.newMessageForm,"name",t)},expression:"newMessageForm.name"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.createNewMessage}},[e._v("确 认")])],1)],2)],1)},Ee=[],Fe={name:"ReceiveTask",props:{id:String,type:String},data:function(){return{bindMessageId:"",newMessageForm:{},messageMap:{},messageModelVisible:!1}},watch:{id:{immediate:!0,handler:function(){var e=this;this.$nextTick((function(){return e.getBindMessage()}))}}},created:function(){var e=this;this.bpmnMessageRefsMap=Object.create(null),this.bpmnRootElements=window.bpmnInstances.modeler.getDefinitions().rootElements,this.bpmnRootElements.filter((function(e){return"bpmn:Message"===e.$type})).forEach((function(t){e.bpmnMessageRefsMap[t.id]=t,e.$set(e.messageMap,t.id,t.name)})),this.$set(this.messageMap,"-1","无")},methods:{getBindMessage:function(){var e;this.bpmnElement=window.bpmnInstances.bpmnElement,this.bindMessageId=(null===(e=this.bpmnElement.businessObject)||void 0===e||null===(e=e.messageRef)||void 0===e?void 0:e.id)||"-1"},openMessageModel:function(){this.messageModelVisible=!0,this.newMessageForm={}},createNewMessage:function(){if(this.messageMap[this.newMessageForm.id])this.$message.error("该消息已存在，请修改id后重新保存");else{var e=window.bpmnInstances.moddle.create("bpmn:Message",this.newMessageForm);this.bpmnRootElements.push(e),this.$set(this.messageMap,this.newMessageForm.id,this.newMessageForm.name),this.bpmnMessageRefsMap[this.newMessageForm.id]=e,this.messageModelVisible=!1}},updateTaskMessage:function(e){"-1"===e?window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:null}):window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{messageRef:this.bpmnMessageRefsMap[e]})}},beforeDestroy:function(){this.bpmnElement=null}},ke=Fe,Te=Object(D["a"])(ke,we,Ee,!1,null,null,null),Ce=Te.exports,Ae={name:"ElementTaskConfig",components:{UserTask:be,ScriptTask:xe,ReceiveTask:Ce},props:{id:String,type:String},data:function(){return{taskConfigForm:{asyncAfter:!1,asyncBefore:!1,exclusive:!1},witchTaskComponent:"",installedComponent:{UserTask:"UserTask",ScriptTask:"ScriptTask",ReceiveTask:"ReceiveTask"}}},watch:{id:{immediate:!0,handler:function(){var e,t,n;this.bpmnElement=window.bpmnInstances.bpmnElement,this.taskConfigForm.asyncBefore=null===(e=this.bpmnElement)||void 0===e||null===(e=e.businessObject)||void 0===e?void 0:e.asyncBefore,this.taskConfigForm.asyncAfter=null===(t=this.bpmnElement)||void 0===t||null===(t=t.businessObject)||void 0===t?void 0:t.asyncAfter,this.taskConfigForm.exclusive=null===(n=this.bpmnElement)||void 0===n||null===(n=n.businessObject)||void 0===n?void 0:n.exclusive}},type:{immediate:!0,handler:function(){this.witchTaskComponent=this.installedComponent[this.type]}}},methods:{changeTaskAsync:function(){this.taskConfigForm.asyncBefore||this.taskConfigForm.asyncAfter||(this.taskConfigForm.exclusive=!1),window.bpmnInstances.modeling.updateProperties(window.bpmnInstances.bpmnElement,Object(Y["a"])({},this.taskConfigForm))}}},Ie=Ae,Oe=Object(D["a"])(Ie,W,Q,!1,null,null,null),Le=Oe.exports,Me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"回路特性"}},[t("el-select",{on:{change:e.changeLoopCharacteristicsType},model:{value:e.loopCharacteristics,callback:function(t){e.loopCharacteristics=t},expression:"loopCharacteristics"}},[t("el-option",{attrs:{label:"并行多重事件",value:"ParallelMultiInstance"}}),t("el-option",{attrs:{label:"时序多重事件",value:"SequentialMultiInstance"}}),t("el-option",{attrs:{label:"循环事件",value:"StandardLoop"}}),t("el-option",{attrs:{label:"无",value:"Null"}})],1)],1),"ParallelMultiInstance"===e.loopCharacteristics||"SequentialMultiInstance"===e.loopCharacteristics?[t("el-form-item",{key:"loopCardinality",attrs:{label:"循环基数"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateLoopCardinality},model:{value:e.loopInstanceForm.loopCardinality,callback:function(t){e.$set(e.loopInstanceForm,"loopCardinality",t)},expression:"loopInstanceForm.loopCardinality"}})],1),t("el-form-item",{key:"collection",attrs:{label:"集合"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateLoopBase},model:{value:e.loopInstanceForm.collection,callback:function(t){e.$set(e.loopInstanceForm,"collection",t)},expression:"loopInstanceForm.collection"}})],1),t("el-form-item",{key:"elementVariable",attrs:{label:"元素变量"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateLoopBase},model:{value:e.loopInstanceForm.elementVariable,callback:function(t){e.$set(e.loopInstanceForm,"elementVariable",t)},expression:"loopInstanceForm.elementVariable"}})],1),t("el-form-item",{key:"completionCondition",attrs:{label:"完成条件"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateLoopCondition},model:{value:e.loopInstanceForm.completionCondition,callback:function(t){e.$set(e.loopInstanceForm,"completionCondition",t)},expression:"loopInstanceForm.completionCondition"}})],1),t("el-form-item",{key:"async",attrs:{label:"异步状态"}},[t("el-checkbox",{attrs:{label:"异步前"},on:{change:function(t){return e.updateLoopAsync("asyncBefore")}},model:{value:e.loopInstanceForm.asyncBefore,callback:function(t){e.$set(e.loopInstanceForm,"asyncBefore",t)},expression:"loopInstanceForm.asyncBefore"}}),t("el-checkbox",{attrs:{label:"异步后"},on:{change:function(t){return e.updateLoopAsync("asyncAfter")}},model:{value:e.loopInstanceForm.asyncAfter,callback:function(t){e.$set(e.loopInstanceForm,"asyncAfter",t)},expression:"loopInstanceForm.asyncAfter"}}),e.loopInstanceForm.asyncAfter||e.loopInstanceForm.asyncBefore?t("el-checkbox",{attrs:{label:"排除"},on:{change:function(t){return e.updateLoopAsync("exclusive")}},model:{value:e.loopInstanceForm.exclusive,callback:function(t){e.$set(e.loopInstanceForm,"exclusive",t)},expression:"loopInstanceForm.exclusive"}}):e._e()],1),e.loopInstanceForm.asyncAfter||e.loopInstanceForm.asyncBefore?t("el-form-item",{key:"timeCycle",attrs:{label:"重试周期",prop:"timeCycle"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateLoopTimeCycle},model:{value:e.loopInstanceForm.timeCycle,callback:function(t){e.$set(e.loopInstanceForm,"timeCycle",t)},expression:"loopInstanceForm.timeCycle"}})],1):e._e()]:e._e()],2)],1)},De=[],Pe={name:"ElementMultiInstance",props:{businessObject:Object,type:String},inject:{prefix:"prefix"},data:function(){return{loopCharacteristics:"",defaultLoopInstanceForm:{completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1},loopInstanceForm:{}}},watch:{businessObject:{immediate:!0,handler:function(e){this.bpmnElement=window.bpmnInstances.bpmnElement,this.getElementLoop(e)}}},methods:{getElementLoop:function(e){var t,n,i,r;return e.loopCharacteristics?"bpmn:StandardLoopCharacteristics"===e.loopCharacteristics.$type?(this.loopCharacteristics="StandardLoop",void(this.loopInstanceForm={})):(e.loopCharacteristics.isSequential?this.loopCharacteristics="SequentialMultiInstance":this.loopCharacteristics="ParallelMultiInstance",this.loopInstanceForm=Object(Y["a"])(Object(Y["a"])(Object(Y["a"])({},this.defaultLoopInstanceForm),e.loopCharacteristics),{},{completionCondition:null!==(t=null===(n=e.loopCharacteristics)||void 0===n||null===(n=n.completionCondition)||void 0===n?void 0:n.body)&&void 0!==t?t:"",loopCardinality:null!==(i=null===(r=e.loopCharacteristics)||void 0===r||null===(r=r.loopCardinality)||void 0===r?void 0:r.body)&&void 0!==i?i:""}),this.multiLoopInstance=window.bpmnInstances.bpmnElement.businessObject.loopCharacteristics,void(e.loopCharacteristics.extensionElements&&e.loopCharacteristics.extensionElements.values&&e.loopCharacteristics.extensionElements.values.length&&this.$set(this.loopInstanceForm,"timeCycle",e.loopCharacteristics.extensionElements.values[0].body))):(this.loopCharacteristics="Null",void(this.loopInstanceForm={}))},changeLoopCharacteristicsType:function(e){if("Null"!==e){if("StandardLoop"===e){var t=window.bpmnInstances.moddle.create("bpmn:StandardLoopCharacteristics");return window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:t}),void(this.multiLoopInstance=null)}this.multiLoopInstance="SequentialMultiInstance"===e?window.bpmnInstances.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):window.bpmnInstances.moddle.create("bpmn:MultiInstanceLoopCharacteristics"),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:this.multiLoopInstance})}else window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{loopCharacteristics:null})},updateLoopCardinality:function(e){var t=null;e&&e.length&&(t=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e})),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{loopCardinality:t})},updateLoopCondition:function(e){var t=null;e&&e.length&&(t=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e})),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{completionCondition:t})},updateLoopTimeCycle:function(e){var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[window.bpmnInstances.moddle.create("".concat(this.prefix,":FailedJobRetryTimeCycle"),{body:e})]});window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{extensionElements:t})},updateLoopBase:function(){window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,{collection:this.loopInstanceForm.collection||null,elementVariable:this.loopInstanceForm.elementVariable||null})},updateLoopAsync:function(e){var t=this.loopInstanceForm,n=t.asyncBefore,i=t.asyncAfter,r=Object.create(null);n||i?r[e]=this.loopInstanceForm[e]:(this.$set(this.loopInstanceForm,"exclusive",!1),r={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}),window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.multiLoopInstance,r)}},beforeDestroy:function(){this.multiLoopInstance=null,this.bpmnElement=null}},_e=Pe,je=Object(D["a"])(_e,Me,De,!1,null,null,null),Be=je.exports,$e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-form",{attrs:{model:e.flowConditionForm,"label-width":"90px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"流转类型"}},[t("el-select",{on:{change:e.updateFlowType},model:{value:e.flowConditionForm.type,callback:function(t){e.$set(e.flowConditionForm,"type",t)},expression:"flowConditionForm.type"}},[t("el-option",{attrs:{label:"普通流转路径",value:"normal"}}),t("el-option",{attrs:{label:"默认流转路径",value:"default"}}),t("el-option",{attrs:{label:"条件流转路径",value:"condition"}})],1)],1),"condition"===e.flowConditionForm.type?t("el-form-item",{key:"condition",attrs:{label:"条件格式"}},[t("el-select",{model:{value:e.flowConditionForm.conditionType,callback:function(t){e.$set(e.flowConditionForm,"conditionType",t)},expression:"flowConditionForm.conditionType"}},[t("el-option",{attrs:{label:"表达式",value:"expression"}}),t("el-option",{attrs:{label:"脚本",value:"script"}})],1)],1):e._e(),e.flowConditionForm.conditionType&&"expression"===e.flowConditionForm.conditionType?t("el-form-item",{key:"express",attrs:{label:"表达式"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.body,callback:function(t){e.$set(e.flowConditionForm,"body",t)},expression:"flowConditionForm.body"}})],1):e._e(),e.flowConditionForm.conditionType&&"script"===e.flowConditionForm.conditionType?[t("el-form-item",{key:"language",attrs:{label:"脚本语言"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.language,callback:function(t){e.$set(e.flowConditionForm,"language",t)},expression:"flowConditionForm.language"}})],1),t("el-form-item",{key:"scriptType",attrs:{label:"脚本类型"}},[t("el-select",{model:{value:e.flowConditionForm.scriptType,callback:function(t){e.$set(e.flowConditionForm,"scriptType",t)},expression:"flowConditionForm.scriptType"}},[t("el-option",{attrs:{label:"内联脚本",value:"inlineScript"}}),t("el-option",{attrs:{label:"外部脚本",value:"externalScript"}})],1)],1),"inlineScript"===e.flowConditionForm.scriptType?t("el-form-item",{key:"body",attrs:{label:"脚本"}},[t("el-input",{attrs:{type:"textarea",clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.body,callback:function(t){e.$set(e.flowConditionForm,"body",t)},expression:"flowConditionForm.body"}})],1):e._e(),"externalScript"===e.flowConditionForm.scriptType?t("el-form-item",{key:"resource",attrs:{label:"资源地址"}},[t("el-input",{attrs:{clearable:""},on:{change:e.updateFlowCondition},model:{value:e.flowConditionForm.resource,callback:function(t){e.$set(e.flowConditionForm,"resource",t)},expression:"flowConditionForm.resource"}})],1):e._e()]:e._e()],2)],1)},Re=[],Ne={name:"FlowCondition",props:{businessObject:Object,type:String},data:function(){return{flowConditionForm:{}}},watch:{businessObject:{immediate:!0,handler:function(){var e=this;this.$nextTick((function(){return e.resetFlowCondition()}))}}},methods:{resetFlowCondition:function(){if(this.bpmnElement=window.bpmnInstances.bpmnElement,this.bpmnElementSource=this.bpmnElement.source,this.bpmnElementSourceRef=this.bpmnElement.businessObject.sourceRef,this.bpmnElementSourceRef&&this.bpmnElementSourceRef.default&&this.bpmnElementSourceRef.default.id===this.bpmnElement.id)this.flowConditionForm={type:"default"};else if(this.bpmnElement.businessObject.conditionExpression){var e=this.bpmnElement.businessObject.conditionExpression;if(this.flowConditionForm=Object(Y["a"])(Object(Y["a"])({},e),{},{type:"condition"}),this.flowConditionForm.resource)return this.$set(this.flowConditionForm,"conditionType","script"),void this.$set(this.flowConditionForm,"scriptType","externalScript");if(e.language)return this.$set(this.flowConditionForm,"conditionType","script"),void this.$set(this.flowConditionForm,"scriptType","inlineScript");this.$set(this.flowConditionForm,"conditionType","expression")}else this.flowConditionForm={type:"normal"}},updateFlowType:function(e){return"condition"===e?(this.flowConditionRef=window.bpmnInstances.moddle.create("bpmn:FormalExpression"),void window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:this.flowConditionRef})):"default"===e?(window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:null}),void window.bpmnInstances.modeling.updateProperties(this.bpmnElementSource,{default:this.bpmnElement})):(this.bpmnElementSourceRef.default&&this.bpmnElementSourceRef.default.id===this.bpmnElement.id&&window.bpmnInstances.modeling.updateProperties(this.bpmnElementSource,{default:null}),void window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:null}))},updateFlowCondition:function(){var e,t=this.flowConditionForm,n=t.conditionType,i=t.scriptType,r=t.body,s=t.resource,a=t.language;"expression"===n?e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:r}):"inlineScript"===i?(e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:r,language:a}),this.$set(this.flowConditionForm,"resource","")):(this.$set(this.flowConditionForm,"body",""),e=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{resource:s,language:a})),window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{conditionExpression:e})}},beforeDestroy:function(){this.bpmnElement=null,this.bpmnElementSource=null,this.bpmnElementSourceRef=null}},Ve=Ne,ze=Object(D["a"])(Ve,$e,Re,!1,null,null,null),Ue=ze.exports,qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("div",{staticClass:"panel-tab__content--title"},[e._m(0),t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openModel("message")}}},[e._v("创建新消息")])],1),t("el-table",{attrs:{data:e.messageList,size:"mini",border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60px"}}),t("el-table-column",{attrs:{label:"消息ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"消息名称",prop:"name","max-width":"300px","show-overflow-tooltip":""}})],1),t("div",{staticClass:"panel-tab__content--title",staticStyle:{"padding-top":"8px","margin-top":"8px","border-top":"1px solid #eeeeee"}},[e._m(1),t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openModel("signal")}}},[e._v("创建新信号")])],1),t("el-table",{attrs:{data:e.signalList,size:"mini",border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60px"}}),t("el-table-column",{attrs:{label:"信号ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"信号名称",prop:"name","max-width":"300px","show-overflow-tooltip":""}})],1),t("el-dialog",{attrs:{visible:e.modelVisible,title:e.modelConfig.title,"close-on-click-modal":!1,width:"400px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.modelVisible=t}}},[t("el-form",{attrs:{model:e.modelObjectForm,size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:e.modelConfig.idLabel}},[t("el-input",{attrs:{clearable:""},model:{value:e.modelObjectForm.id,callback:function(t){e.$set(e.modelObjectForm,"id",t)},expression:"modelObjectForm.id"}})],1),t("el-form-item",{attrs:{label:e.modelConfig.nameLabel}},[t("el-input",{attrs:{clearable:""},model:{value:e.modelObjectForm.name,callback:function(t){e.$set(e.modelObjectForm,"name",t)},expression:"modelObjectForm.name"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.modelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addNewObject}},[e._v("保 存")])],1)],2)],1)},Je=[function(){var e=this,t=e._self._c;return t("span",[t("i",{staticClass:"el-icon-menu",staticStyle:{"margin-right":"8px",color:"#555555"}}),e._v("消息列表")])},function(){var e=this,t=e._self._c;return t("span",[t("i",{staticClass:"el-icon-menu",staticStyle:{"margin-right":"8px",color:"#555555"}}),e._v("信号列表")])}],Ge={name:"SignalAndMassage",data:function(){return{signalList:[],messageList:[],modelVisible:!1,modelType:"",modelObjectForm:{}}},computed:{modelConfig:function(){return"message"===this.modelType?{title:"创建消息",idLabel:"消息ID",nameLabel:"消息名称"}:{title:"创建信号",idLabel:"信号ID",nameLabel:"信号名称"}}},mounted:function(){this.initDataList()},methods:{initDataList:function(){var e=this;this.rootElements=window.bpmnInstances.modeler.getDefinitions().rootElements,this.messageIdMap={},this.signalIdMap={},this.messageList=[],this.signalList=[],this.rootElements.forEach((function(t){"bpmn:Message"===t.$type&&(e.messageIdMap[t.id]=!0,e.messageList.push(Object(Y["a"])({},t))),"bpmn:Signal"===t.$type&&(e.signalIdMap[t.id]=!0,e.signalList.push(Object(Y["a"])({},t)))}))},openModel:function(e){this.modelType=e,this.modelObjectForm={},this.modelVisible=!0},addNewObject:function(){if("message"===this.modelType){if(this.messageIdMap[this.modelObjectForm.id])return this.$message.error("该消息已存在，请修改id后重新保存");var e=window.bpmnInstances.moddle.create("bpmn:Message",this.modelObjectForm);this.rootElements.push(e)}else{if(this.signalIdMap[this.modelObjectForm.id])return this.$message.error("该信号已存在，请修改id后重新保存");var t=window.bpmnInstances.moddle.create("bpmn:Signal",this.modelObjectForm);this.rootElements.push(t)}this.modelVisible=!1,this.initDataList()}}},Ke=Ge,Xe=Object(D["a"])(Ke,qe,Je,!1,null,null,null),Ze=Xe.exports,He=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-table",{attrs:{data:e.elementListenersList,size:"mini",border:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),t("el-table-column",{attrs:{label:"事件类型","min-width":"100px",prop:"event"}}),t("el-table-column",{attrs:{label:"监听器类型","min-width":"100px","show-overflow-tooltip":"",formatter:function(t){return e.listenerTypeObject[t.listenerType]}}}),t("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row,r=n.$index;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerForm(i,r)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListener(i,r)}}},[e._v("移除")])]}}])})],1),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openListenerForm(null)}}},[e._v("添加监听器")])],1),t("el-drawer",{attrs:{visible:e.listenerFormModelVisible,title:"执行监听器",size:"".concat(e.width,"px"),"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFormModelVisible=t}}},[t("el-form",{ref:"listenerFormRef",attrs:{size:"mini",model:e.listenerForm,"label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"事件类型",prop:"event",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerForm.event,callback:function(t){e.$set(e.listenerForm,"event",t)},expression:"listenerForm.event"}},[t("el-option",{attrs:{label:"start",value:"start"}}),t("el-option",{attrs:{label:"end",value:"end"}})],1)],1),t("el-form-item",{attrs:{label:"监听器类型",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerForm.listenerType,callback:function(t){e.$set(e.listenerForm,"listenerType",t)},expression:"listenerForm.listenerType"}},e._l(Object.keys(e.listenerTypeObject),(function(n){return t("el-option",{key:n,attrs:{label:e.listenerTypeObject[n],value:n}})})),1)],1),"classListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-class",attrs:{label:"Java类",prop:"class",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.class,callback:function(t){e.$set(e.listenerForm,"class",t)},expression:"listenerForm.class"}})],1):e._e(),"expressionListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-expression",attrs:{label:"表达式",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.expression,callback:function(t){e.$set(e.listenerForm,"expression",t)},expression:"listenerForm.expression"}})],1):e._e(),"delegateExpressionListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-delegate",attrs:{label:"代理表达式",prop:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.delegateExpression,callback:function(t){e.$set(e.listenerForm,"delegateExpression",t)},expression:"listenerForm.delegateExpression"}})],1):e._e(),"scriptListener"===e.listenerForm.listenerType?[t("el-form-item",{key:"listener-script-format",attrs:{label:"脚本格式",prop:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本格式"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.scriptFormat,callback:function(t){e.$set(e.listenerForm,"scriptFormat",t)},expression:"listenerForm.scriptFormat"}})],1),t("el-form-item",{key:"listener-script-type",attrs:{label:"脚本类型",prop:"scriptType",rules:{required:!0,trigger:["blur","change"],message:"请选择脚本类型"}}},[t("el-select",{model:{value:e.listenerForm.scriptType,callback:function(t){e.$set(e.listenerForm,"scriptType",t)},expression:"listenerForm.scriptType"}},[t("el-option",{attrs:{label:"内联脚本",value:"inlineScript"}}),t("el-option",{attrs:{label:"外部脚本",value:"externalScript"}})],1)],1),"inlineScript"===e.listenerForm.scriptType?t("el-form-item",{key:"listener-script",attrs:{label:"脚本内容",prop:"value",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本内容"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.value,callback:function(t){e.$set(e.listenerForm,"value",t)},expression:"listenerForm.value"}})],1):e._e(),"externalScript"===e.listenerForm.scriptType?t("el-form-item",{key:"listener-resource",attrs:{label:"资源地址",prop:"resource",rules:{required:!0,trigger:["blur","change"],message:"请填写资源地址"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.resource,callback:function(t){e.$set(e.listenerForm,"resource",t)},expression:"listenerForm.resource"}})],1):e._e()]:e._e()],2),t("el-divider"),t("p",{staticClass:"listener-filed__title"},[t("span",[t("i",{staticClass:"el-icon-menu"}),e._v("注入字段：")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openListenerFieldForm(null)}}},[e._v("添加字段")])],1),t("el-table",{staticStyle:{flex:"none"},attrs:{data:e.fieldsListOfListener,size:"mini","max-height":"240",border:"",fit:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),t("el-table-column",{attrs:{label:"字段名称","min-width":"100px",prop:"name"}}),t("el-table-column",{attrs:{label:"字段类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.fieldTypeObject[t.fieldType]}}}),t("el-table-column",{attrs:{label:"字段值/表达式","min-width":"100px","show-overflow-tooltip":"",formatter:function(e){return e.string||e.expression}}}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row,r=n.$index;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerFieldForm(i,r)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListenerField(i,r)}}},[e._v("移除")])]}}])})],1),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFormModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerConfig}},[e._v("保 存")])],1)],1),t("el-dialog",{attrs:{title:"字段配置",visible:e.listenerFieldFormModelVisible,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFieldFormModelVisible=t}}},[t("el-form",{ref:"listenerFieldFormRef",staticStyle:{height:"136px"},attrs:{model:e.listenerFieldForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"字段名称：",prop:"name",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.name,callback:function(t){e.$set(e.listenerFieldForm,"name",t)},expression:"listenerFieldForm.name"}})],1),t("el-form-item",{attrs:{label:"字段类型：",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerFieldForm.fieldType,callback:function(t){e.$set(e.listenerFieldForm,"fieldType",t)},expression:"listenerFieldForm.fieldType"}},e._l(Object.keys(e.fieldTypeObject),(function(n){return t("el-option",{key:n,attrs:{label:e.fieldTypeObject[n],value:n}})})),1)],1),"string"===e.listenerFieldForm.fieldType?t("el-form-item",{key:"field-string",attrs:{label:"字段值：",prop:"string",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.string,callback:function(t){e.$set(e.listenerFieldForm,"string",t)},expression:"listenerFieldForm.string"}})],1):e._e(),"expression"===e.listenerFieldForm.fieldType?t("el-form-item",{key:"field-expression",attrs:{label:"表达式：",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.expression,callback:function(t){e.$set(e.listenerFieldForm,"expression",t)},expression:"listenerFieldForm.expression"}})],1):e._e()],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFieldFormModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerFiled}},[e._v("确 定")])],1)],2)],1)},We=[],Qe=n("ade3");function Ye(e,t,n){var i=Object.create(null);switch(i.event=e.event,t&&(i.id=e.id),e.listenerType){case"scriptListener":i.script=tt(e,n);break;case"expressionListener":i.expression=e.expression;break;case"delegateExpressionListener":i.delegateExpression=e.delegateExpression;break;default:i.class=e.class}if(e.fields&&(i.fields=e.fields.map((function(e){return et(e,n)}))),t&&"timeout"===e.event&&e.eventDefinitionType){var r=window.bpmnInstances.moddle.create("bpmn:FormalExpression",{body:e.eventTimeDefinitions}),s=window.bpmnInstances.moddle.create("bpmn:TimerEventDefinition",Object(Qe["a"])({id:"TimerEventDefinition_".concat(it(8))},"time".concat(e.eventDefinitionType.replace(/^\S/,(function(e){return e.toUpperCase()}))),r));i.eventDefinitions=[s]}return window.bpmnInstances.moddle.create("".concat(n,":").concat(t?"TaskListener":"ExecutionListener"),i)}function et(e,t){var n=e.name,i=e.fieldType,r=e.string,s=e.expression,a="string"===i?{name:n,string:r}:{name:n,expression:s};return window.bpmnInstances.moddle.create("".concat(t,":Field"),a)}function tt(e,t){var n=e.scriptType,i=e.scriptFormat,r=e.value,s=e.resource,a="inlineScript"===n?{scriptFormat:i,value:r}:{scriptFormat:i,resource:s};return window.bpmnInstances.moddle.create("".concat(t,":Script"),a)}function nt(e,t){var n=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:t});window.bpmnInstances.modeling.updateProperties(e,{extensionElements:n})}function it(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1?arguments[1]:void 0,n="",i=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e;r>0;--r)n+=i[Math.floor(Math.random()*i.length)];return n}function rt(e){var t=Object(Y["a"])({},e);if(e.script&&(t=Object(Y["a"])(Object(Y["a"])(Object(Y["a"])({},e),e.script),{},{scriptType:e.script.resource?"externalScript":"inlineScript"})),"timeout"===e.event&&e.eventDefinitions&&e.eventDefinitions.length){var n="";for(var i in e.eventDefinitions[0])console.log(e.eventDefinitions,i),-1!==i.indexOf("time")&&(n=i,t.eventDefinitionType=i.replace("time","").toLowerCase());console.log(n),t.eventTimeDefinitions=e.eventDefinitions[0][n].body}return t}function st(e){var t,n;return e.class&&(n="classListener"),e.expression&&(n="expressionListener"),e.delegateExpression&&(n="delegateExpressionListener"),e.script&&(n="scriptListener"),Object(Y["a"])(Object(Y["a"])(Object(Y["a"])({},JSON.parse(JSON.stringify(e))),null!==(t=e.script)&&void 0!==t?t:{}),{},{listenerType:n})}var at={classListener:"Java 类",expressionListener:"表达式",delegateExpressionListener:"代理表达式",scriptListener:"脚本"},ot={create:"创建",assignment:"指派",complete:"完成",delete:"删除",update:"更新",timeout:"超时"},lt={string:"字符串",expression:"表达式"},pt={name:"ElementListeners",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementListenersList:[],listenerForm:{},listenerFormModelVisible:!1,fieldsListOfListener:[],listenerFieldForm:{},listenerFieldFormModelVisible:!1,editingListenerIndex:-1,editingListenerFieldIndex:-1,listenerTypeObject:at,fieldTypeObject:lt}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetListenersList()}))}}},methods:{resetListenersList:function(){var e,t,n=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementListeners=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(t=t.extensionElements)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.filter((function(e){return e.$type==="".concat(n.prefix,":ExecutionListener")})))&&void 0!==e?e:[],this.elementListenersList=this.bpmnElementListeners.map((function(e){return st(e)}))},openListenerForm:function(e,t){var n=this;e?(this.listenerForm=rt(e),this.editingListenerIndex=t):(this.listenerForm={},this.editingListenerIndex=-1),e&&e.fields?this.fieldsListOfListener=e.fields.map((function(e){return Object(Y["a"])(Object(Y["a"])({},e),{},{fieldType:e.string?"string":"expression"})})):(this.fieldsListOfListener=[],this.$set(this.listenerForm,"fields",[])),this.listenerFormModelVisible=!0,this.$nextTick((function(){n.$refs["listenerFormRef"]&&n.$refs["listenerFormRef"].clearValidate()}))},openListenerFieldForm:function(e,t){var n=this;this.listenerFieldForm=e?JSON.parse(JSON.stringify(e)):{},this.editingListenerFieldIndex=e?t:-1,this.listenerFieldFormModelVisible=!0,this.$nextTick((function(){n.$refs["listenerFieldFormRef"]&&n.$refs["listenerFieldFormRef"].clearValidate()}))},saveListenerFiled:function(){var e=this;return Object(u["a"])(Object(m["a"])().mark((function t(){var n;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["listenerFieldFormRef"].validate();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:-1===e.editingListenerFieldIndex?(e.fieldsListOfListener.push(e.listenerFieldForm),e.listenerForm.fields.push(e.listenerFieldForm)):(e.fieldsListOfListener.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm),e.listenerForm.fields.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm)),e.listenerFieldFormModelVisible=!1,e.$nextTick((function(){return e.listenerFieldForm={}}));case 8:case"end":return t.stop()}}),t)})))()},removeListenerField:function(e,t){var n=this;this.$confirm("确认移除该字段吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.fieldsListOfListener.splice(t,1),n.listenerForm.fields.splice(t,1)})).catch((function(){return console.info("操作取消")}))},removeListener:function(e,t){var n=this;this.$confirm("确认移除该监听器吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.bpmnElementListeners.splice(t,1),n.elementListenersList.splice(t,1),nt(n.bpmnElement,n.otherExtensionList.concat(n.bpmnElementListeners))})).catch((function(){return console.info("操作取消")}))},saveListenerConfig:function(){var e=this;return Object(u["a"])(Object(m["a"])().mark((function t(){var n,i,r,s;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["listenerFormRef"].validate();case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:s=Ye(e.listenerForm,!1,e.prefix),-1===e.editingListenerIndex?(e.bpmnElementListeners.push(s),e.elementListenersList.push(e.listenerForm)):(e.bpmnElementListeners.splice(e.editingListenerIndex,1,s),e.elementListenersList.splice(e.editingListenerIndex,1,e.listenerForm)),e.otherExtensionList=null!==(n=null===(i=e.bpmnElement.businessObject)||void 0===i||null===(i=i.extensionElements)||void 0===i||null===(i=i.values)||void 0===i?void 0:i.filter((function(t){return t.$type!=="".concat(e.prefix,":ExecutionListener")})))&&void 0!==n?n:[],nt(e.bpmnElement,e.otherExtensionList.concat(e.bpmnElementListeners)),e.listenerFormModelVisible=!1,e.listenerForm={};case 11:case"end":return t.stop()}}),t)})))()}}},ct=pt,mt=Object(D["a"])(ct,He,We,!1,null,null,null),ut=mt.exports,dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-table",{attrs:{data:e.elementPropertyList,size:"mini","max-height":"240",border:"",fit:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),t("el-table-column",{attrs:{label:"属性名",prop:"name","min-width":"100px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"属性值",prop:"value","min-width":"100px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row,r=n.$index;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openAttributesForm(i,r)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeAttributes(i,r)}}},[e._v("移除")])]}}])})],1),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openAttributesForm(null,-1)}}},[e._v("添加属性")])],1),t("el-dialog",{attrs:{visible:e.propertyFormModelVisible,title:"属性配置",width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.propertyFormModelVisible=t}}},[t("el-form",{ref:"attributeFormRef",attrs:{model:e.propertyForm,"label-width":"80px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"属性名：",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.propertyForm.name,callback:function(t){e.$set(e.propertyForm,"name",t)},expression:"propertyForm.name"}})],1),t("el-form-item",{attrs:{label:"属性值：",prop:"value"}},[t("el-input",{attrs:{clearable:""},model:{value:e.propertyForm.value,callback:function(t){e.$set(e.propertyForm,"value",t)},expression:"propertyForm.value"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.propertyFormModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveAttribute}},[e._v("确 定")])],1)],2)],1)},ft=[],bt=(n("13d5"),{name:"ElementProperties",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementPropertyList:[],propertyForm:{},editingPropertyIndex:-1,propertyFormModelVisible:!1}},watch:{id:{immediate:!0,handler:function(e){e&&e.length&&this.resetAttributesList()}}},methods:{resetAttributesList:function(){var e,t,n,i=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementProperties=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(t=t.extensionElements)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.filter((function(e){return e.$type!=="".concat(i.prefix,":Properties")&&i.otherExtensionList.push(e),e.$type==="".concat(i.prefix,":Properties")})))&&void 0!==e?e:[],this.bpmnElementPropertyList=this.bpmnElementProperties.reduce((function(e,t){return e.concat(t.values)}),[]),this.elementPropertyList=JSON.parse(JSON.stringify(null!==(n=this.bpmnElementPropertyList)&&void 0!==n?n:[]))},openAttributesForm:function(e,t){var n=this;this.editingPropertyIndex=t,this.propertyForm=-1===t?{}:JSON.parse(JSON.stringify(e)),this.propertyFormModelVisible=!0,this.$nextTick((function(){n.$refs["attributeFormRef"]&&n.$refs["attributeFormRef"].clearValidate()}))},removeAttributes:function(e,t){var n=this;this.$confirm("确认移除该属性吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.elementPropertyList.splice(t,1),n.bpmnElementPropertyList.splice(t,1);var e=window.bpmnInstances.moddle.create("".concat(n.prefix,":Properties"),{values:n.bpmnElementPropertyList});n.updateElementExtensions(e),n.resetAttributesList()})).catch((function(){return console.info("操作取消")}))},saveAttribute:function(){var e=this.propertyForm,t=e.name,n=e.value;if(-1!==this.editingPropertyIndex)window.bpmnInstances.modeling.updateModdleProperties(this.bpmnElement,this.bpmnElementPropertyList[this.editingPropertyIndex],{name:t,value:n});else{var i=window.bpmnInstances.moddle.create("".concat(this.prefix,":Property"),{name:t,value:n}),r=window.bpmnInstances.moddle.create("".concat(this.prefix,":Properties"),{values:this.bpmnElementPropertyList.concat([i])});this.updateElementExtensions(r)}this.propertyFormModelVisible=!1,this.resetAttributesList()},updateElementExtensions:function(e){var t=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensionList.concat([e])});window.bpmnInstances.modeling.updateProperties(this.bpmnElement,{extensionElements:t})}}}),ht=bt,yt=Object(D["a"])(ht,dt,ft,!1,null,null,null),gt=yt.exports,vt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-form",{attrs:{size:"mini","label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"表单",prop:"formKey"}},[t("el-select",{attrs:{placeholder:"请选择表单",clearable:""},on:{change:e.updateElementFormKey},model:{value:e.formKey,callback:function(t){e.formKey=t},expression:"formKey"}},e._l(e.formOptions,(function(e){return t("el-option",{key:e.formId,attrs:{label:e.formName,value:"key_".concat(e.formId)}})})),1)],1),t("el-form-item",{attrs:{prop:"localScope"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{attrs:{content:"若为节点表单，则表单信息仅在此节点可用，默认为全局表单，表单信息在整个流程实例中可用",placement:"top-start"}},[t("i",{staticClass:"header-icon el-icon-info"})]),t("span",[e._v("节点表单")])],1),t("el-switch",{attrs:{disabled:"StartEvent"===e.type,"active-text":"是","inactive-text":"否"},on:{change:function(t){return e.updateElementFormScope()}},model:{value:e.localScope,callback:function(t){e.localScope=t},expression:"localScope"}})],1)],1),t("el-dialog",{attrs:{visible:e.fieldOptionModelVisible,title:e.optionModelTitle,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.fieldOptionModelVisible=t}}},[t("el-form",{attrs:{model:e.fieldOptionForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},["constraint"!==e.fieldOptionType?t("el-form-item",{key:"option-id",attrs:{label:"编号/ID"}},[t("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.id,callback:function(t){e.$set(e.fieldOptionForm,"id",t)},expression:"fieldOptionForm.id"}})],1):e._e(),"property"!==e.fieldOptionType?t("el-form-item",{key:"option-name",attrs:{label:"名称"}},[t("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.name,callback:function(t){e.$set(e.fieldOptionForm,"name",t)},expression:"fieldOptionForm.name"}})],1):e._e(),"constraint"===e.fieldOptionType?t("el-form-item",{key:"option-config",attrs:{label:"配置"}},[t("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.config,callback:function(t){e.$set(e.fieldOptionForm,"config",t)},expression:"fieldOptionForm.config"}})],1):e._e(),"property"===e.fieldOptionType?t("el-form-item",{key:"option-value",attrs:{label:"值"}},[t("el-input",{attrs:{clearable:""},model:{value:e.fieldOptionForm.value,callback:function(t){e.$set(e.fieldOptionForm,"value",t)},expression:"fieldOptionForm.value"}})],1):e._e()],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.fieldOptionModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveFieldOption}},[e._v("确 定")])],1)],2)],1)},St=[],xt=n("e3ab"),wt={name:"ElementForm",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{formOptions:[],formKey:"",localScope:!1,businessKey:"",optionModelTitle:"",fieldList:[],formFieldForm:{},fieldType:{long:"长整型",string:"字符串",boolean:"布尔类",date:"日期类",enum:"枚举类",custom:"自定义类型"},formFieldIndex:-1,formFieldOptionIndex:-1,fieldModelVisible:!1,fieldOptionModelVisible:!1,fieldOptionForm:{},fieldOptionType:"",fieldEnumList:[],fieldConstraintsList:[],fieldPropertiesList:[]}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetFormList()}))}}},created:function(){this.getFormList()},methods:{getFormList:function(){var e=this;Object(xt["d"])().then((function(t){return e.formOptions=t.rows}))},resetFormList:function(){var e=this;this.bpmnELement=window.bpmnInstances.bpmnElement,this.formKey=this.bpmnELement.businessObject.formKey,this.localScope=this.bpmnELement.businessObject.localScope,this.elExtensionElements=this.bpmnELement.businessObject.get("extensionElements")||window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:[]}),this.otherExtensions=this.elExtensionElements.values.filter((function(t){return t.$type!=="".concat(e.prefix,":FormData")}))},updateElementFormKey:function(){window.bpmnInstances.modeling.updateProperties(this.bpmnELement,{formKey:this.formKey})},updateElementFormScope:function(){window.bpmnInstances.modeling.updateProperties(this.bpmnELement,{localScope:this.localScope})},updateElementBusinessKey:function(){window.bpmnInstances.modeling.updateModdleProperties(this.bpmnELement,this.formData,{businessKey:this.businessKey})},changeFieldTypeType:function(e){this.$set(this.formFieldForm,"type","custom"===e?"":e)},openFieldForm:function(e,t){if(this.formFieldIndex=t,-1!==t){var n,i,r=this.formData.fields[t];this.formFieldForm=JSON.parse(JSON.stringify(e)),this.$set(this.formFieldForm,"typeType",this.fieldType[e.type]?e.type:"custom"),"enum"===e.type&&(this.fieldEnumList=JSON.parse(JSON.stringify((null===r||void 0===r?void 0:r.values)||[]))),this.fieldConstraintsList=JSON.parse(JSON.stringify((null===r||void 0===r||null===(n=r.validation)||void 0===n?void 0:n.constraints)||[])),this.fieldPropertiesList=JSON.parse(JSON.stringify((null===r||void 0===r||null===(i=r.properties)||void 0===i?void 0:i.values)||[]))}else this.formFieldForm={},this.fieldEnumList=[],this.fieldConstraintsList=[],this.fieldPropertiesList=[];this.fieldModelVisible=!0},openFieldOptionForm:function(e,t,n){return this.fieldOptionModelVisible=!0,this.fieldOptionType=n,this.formFieldOptionIndex=t,"property"===n?(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="属性配置"):"enum"===n?(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="枚举值配置"):(this.fieldOptionForm=e?JSON.parse(JSON.stringify(e)):{},this.optionModelTitle="约束条件配置")},saveFieldOption:function(){-1===this.formFieldOptionIndex?("property"===this.fieldOptionType&&this.fieldPropertiesList.push(this.fieldOptionForm),"constraint"===this.fieldOptionType&&this.fieldConstraintsList.push(this.fieldOptionForm),"enum"===this.fieldOptionType&&this.fieldEnumList.push(this.fieldOptionForm)):("property"===this.fieldOptionType&&this.fieldPropertiesList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm),"constraint"===this.fieldOptionType&&this.fieldConstraintsList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm),"enum"===this.fieldOptionType&&this.fieldEnumList.splice(this.formFieldOptionIndex,1,this.fieldOptionForm)),this.fieldOptionModelVisible=!1,this.fieldOptionForm={}},saveField:function(){var e=this,t=this.formFieldForm,n=t.id,i=t.type,r=t.label,s=t.defaultValue,a=t.datePattern,o=window.bpmnInstances.moddle.create("".concat(this.prefix,":FormField"),{id:n,type:i,label:r});if(s&&(o.defaultValue=s),a&&(o.datePattern=a),this.fieldPropertiesList&&this.fieldPropertiesList.length){var l=this.fieldPropertiesList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Property"),{id:t.id,value:t.value})}));o.properties=window.bpmnInstances.moddle.create("".concat(this.prefix,":Properties"),{values:l})}if(this.fieldConstraintsList&&this.fieldConstraintsList.length){var p=this.fieldConstraintsList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Constraint"),{name:t.name,config:t.config})}));o.validation=window.bpmnInstances.moddle.create("".concat(this.prefix,":Validation"),{constraints:p})}this.fieldEnumList&&this.fieldEnumList.length&&(o.values=this.fieldEnumList.map((function(t){return window.bpmnInstances.moddle.create("".concat(e.prefix,":Value"),{name:t.name,id:t.id})}))),-1===this.formFieldIndex?(this.fieldList.push(this.formFieldForm),this.formData.fields.push(o)):(this.fieldList.splice(this.formFieldIndex,1,this.formFieldForm),this.formData.fields.splice(this.formFieldIndex,1,o)),this.updateElementExtensions(),this.fieldModelVisible=!1},removeFieldOptionItem:function(e,t,n){"property"!==n?"enum"!==n?this.fieldConstraintsList.splice(t,1):this.fieldEnumList.splice(t,1):this.fieldPropertiesList.splice(t,1)},removeField:function(e,t){this.fieldList.splice(t,1),this.formData.fields.splice(t,1),this.updateElementExtensions()},updateElementExtensions:function(){var e=window.bpmnInstances.moddle.create("bpmn:ExtensionElements",{values:this.otherExtensions.concat(this.formData)});window.bpmnInstances.modeling.updateProperties(this.bpmnELement,{extensionElements:e})}}},Et=wt,Ft=Object(D["a"])(Et,vt,St,!1,null,null,null),kt=Ft.exports,Tt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel-tab__content"},[t("el-table",{attrs:{data:e.elementListenersList,size:"mini",border:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),t("el-table-column",{attrs:{label:"事件类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.listenerEventTypeObject[t.event]}}}),t("el-table-column",{attrs:{label:"事件id","min-width":"80px",prop:"id","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"监听器类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.listenerTypeObject[t.listenerType]}}}),t("el-table-column",{attrs:{label:"操作",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row,r=n.$index;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerForm(i,r)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListener(i,r)}}},[e._v("移除")])]}}])})],1),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.openListenerForm(null)}}},[e._v("添加监听器")])],1),t("el-drawer",{attrs:{visible:e.listenerFormModelVisible,title:"任务监听器",size:"".concat(e.width,"px"),"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFormModelVisible=t}}},[t("el-form",{ref:"listenerFormRef",attrs:{size:"mini",model:e.listenerForm,"label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"事件类型",prop:"event",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerForm.event,callback:function(t){e.$set(e.listenerForm,"event",t)},expression:"listenerForm.event"}},e._l(Object.keys(e.listenerEventTypeObject),(function(n){return t("el-option",{key:n,attrs:{label:e.listenerEventTypeObject[n],value:n}})})),1)],1),t("el-form-item",{attrs:{label:"监听器ID",prop:"id",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.id,callback:function(t){e.$set(e.listenerForm,"id",t)},expression:"listenerForm.id"}})],1),t("el-form-item",{attrs:{label:"监听器类型",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerForm.listenerType,callback:function(t){e.$set(e.listenerForm,"listenerType",t)},expression:"listenerForm.listenerType"}},e._l(Object.keys(e.listenerTypeObject),(function(n){return t("el-option",{key:n,attrs:{label:e.listenerTypeObject[n],value:n}})})),1)],1),"classListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-class",attrs:{label:"Java类",prop:"class",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.class,callback:function(t){e.$set(e.listenerForm,"class",t)},expression:"listenerForm.class"}})],1):e._e(),"expressionListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-expression",attrs:{label:"表达式",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.expression,callback:function(t){e.$set(e.listenerForm,"expression",t)},expression:"listenerForm.expression"}})],1):e._e(),"delegateExpressionListener"===e.listenerForm.listenerType?t("el-form-item",{key:"listener-delegate",attrs:{label:"代理表达式",prop:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.delegateExpression,callback:function(t){e.$set(e.listenerForm,"delegateExpression",t)},expression:"listenerForm.delegateExpression"}})],1):e._e(),"scriptListener"===e.listenerForm.listenerType?[t("el-form-item",{key:"listener-script-format",attrs:{label:"脚本格式",prop:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本格式"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.scriptFormat,callback:function(t){e.$set(e.listenerForm,"scriptFormat",t)},expression:"listenerForm.scriptFormat"}})],1),t("el-form-item",{key:"listener-script-type",attrs:{label:"脚本类型",prop:"scriptType",rules:{required:!0,trigger:["blur","change"],message:"请选择脚本类型"}}},[t("el-select",{model:{value:e.listenerForm.scriptType,callback:function(t){e.$set(e.listenerForm,"scriptType",t)},expression:"listenerForm.scriptType"}},[t("el-option",{attrs:{label:"内联脚本",value:"inlineScript"}}),t("el-option",{attrs:{label:"外部脚本",value:"externalScript"}})],1)],1),"inlineScript"===e.listenerForm.scriptType?t("el-form-item",{key:"listener-script",attrs:{label:"脚本内容",prop:"value",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本内容"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.value,callback:function(t){e.$set(e.listenerForm,"value",t)},expression:"listenerForm.value"}})],1):e._e(),"externalScript"===e.listenerForm.scriptType?t("el-form-item",{key:"listener-resource",attrs:{label:"资源地址",prop:"resource",rules:{required:!0,trigger:["blur","change"],message:"请填写资源地址"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.resource,callback:function(t){e.$set(e.listenerForm,"resource",t)},expression:"listenerForm.resource"}})],1):e._e()]:e._e(),"timeout"===e.listenerForm.event?[t("el-form-item",{key:"eventDefinitionType",attrs:{label:"定时器类型",prop:"eventDefinitionType"}},[t("el-select",{model:{value:e.listenerForm.eventDefinitionType,callback:function(t){e.$set(e.listenerForm,"eventDefinitionType",t)},expression:"listenerForm.eventDefinitionType"}},[t("el-option",{attrs:{label:"日期",value:"date"}}),t("el-option",{attrs:{label:"持续时长",value:"duration"}}),t("el-option",{attrs:{label:"循环",value:"cycle"}}),t("el-option",{attrs:{label:"无",value:"null"}})],1)],1),e.listenerForm.eventDefinitionType&&"null"!==e.listenerForm.eventDefinitionType?t("el-form-item",{key:"eventTimeDefinitions",attrs:{label:"定时器",prop:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:"请填写定时器配置"}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerForm.eventTimeDefinitions,callback:function(t){e.$set(e.listenerForm,"eventTimeDefinitions",t)},expression:"listenerForm.eventTimeDefinitions"}})],1):e._e()]:e._e()],2),t("el-divider"),t("p",{staticClass:"listener-filed__title"},[t("span",[t("i",{staticClass:"el-icon-menu"}),e._v("注入字段：")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openListenerFieldForm(null)}}},[e._v("添加字段")])],1),t("el-table",{staticStyle:{flex:"none"},attrs:{data:e.fieldsListOfListener,size:"mini","max-height":"240",border:"",fit:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",type:"index"}}),t("el-table-column",{attrs:{label:"字段名称","min-width":"100px",prop:"name"}}),t("el-table-column",{attrs:{label:"字段类型","min-width":"80px","show-overflow-tooltip":"",formatter:function(t){return e.fieldTypeObject[t.fieldType]}}}),t("el-table-column",{attrs:{label:"字段值/表达式","min-width":"100px","show-overflow-tooltip":"",formatter:function(e){return e.string||e.expression}}}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.row,r=n.$index;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.openListenerFieldForm(i,r)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"#ff4d4f"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.removeListenerField(i,r)}}},[e._v("移除")])]}}])})],1),t("div",{staticClass:"element-drawer__button"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFormModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerConfig}},[e._v("保 存")])],1)],1),t("el-dialog",{attrs:{title:"字段配置",visible:e.listenerFieldFormModelVisible,width:"600px","append-to-body":"","destroy-on-close":""},on:{"update:visible":function(t){e.listenerFieldFormModelVisible=t}}},[t("el-form",{ref:"listenerFieldFormRef",staticStyle:{height:"136px"},attrs:{model:e.listenerFieldForm,size:"mini","label-width":"96px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"字段名称：",prop:"name",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.name,callback:function(t){e.$set(e.listenerFieldForm,"name",t)},expression:"listenerFieldForm.name"}})],1),t("el-form-item",{attrs:{label:"字段类型：",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}}},[t("el-select",{model:{value:e.listenerFieldForm.fieldType,callback:function(t){e.$set(e.listenerFieldForm,"fieldType",t)},expression:"listenerFieldForm.fieldType"}},e._l(Object.keys(e.fieldTypeObject),(function(n){return t("el-option",{key:n,attrs:{label:e.fieldTypeObject[n],value:n}})})),1)],1),"string"===e.listenerFieldForm.fieldType?t("el-form-item",{key:"field-string",attrs:{label:"字段值：",prop:"string",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.string,callback:function(t){e.$set(e.listenerFieldForm,"string",t)},expression:"listenerFieldForm.string"}})],1):e._e(),"expression"===e.listenerFieldForm.fieldType?t("el-form-item",{key:"field-expression",attrs:{label:"表达式：",prop:"expression",rules:{required:!0,trigger:["blur","change"]}}},[t("el-input",{attrs:{clearable:""},model:{value:e.listenerFieldForm.expression,callback:function(t){e.$set(e.listenerFieldForm,"expression",t)},expression:"listenerFieldForm.expression"}})],1):e._e()],1),t("template",{slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.listenerFieldFormModelVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveListenerFiled}},[e._v("确 定")])],1)],2)],1)},Ct=[],At={name:"UserTaskListeners",props:{id:String,type:String},inject:{prefix:"prefix",width:"width"},data:function(){return{elementListenersList:[],listenerEventTypeObject:ot,listenerTypeObject:at,listenerFormModelVisible:!1,listenerForm:{},fieldTypeObject:lt,fieldsListOfListener:[],listenerFieldFormModelVisible:!1,editingListenerIndex:-1,editingListenerFieldIndex:-1,listenerFieldForm:{}}},watch:{id:{immediate:!0,handler:function(e){var t=this;e&&e.length&&this.$nextTick((function(){return t.resetListenersList()}))}}},methods:{resetListenersList:function(){var e,t,n=this;this.bpmnElement=window.bpmnInstances.bpmnElement,this.otherExtensionList=[],this.bpmnElementListeners=null!==(e=null===(t=this.bpmnElement.businessObject)||void 0===t||null===(t=t.extensionElements)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.filter((function(e){return e.$type==="".concat(n.prefix,":TaskListener")})))&&void 0!==e?e:[],this.elementListenersList=this.bpmnElementListeners.map((function(e){return st(e)}))},openListenerForm:function(e,t){var n=this;e?(this.listenerForm=rt(e),this.editingListenerIndex=t):(this.listenerForm={},this.editingListenerIndex=-1),e&&e.fields?this.fieldsListOfListener=e.fields.map((function(e){return Object(Y["a"])(Object(Y["a"])({},e),{},{fieldType:e.string?"string":"expression"})})):(this.fieldsListOfListener=[],this.$set(this.listenerForm,"fields",[])),this.listenerFormModelVisible=!0,this.$nextTick((function(){n.$refs["listenerFormRef"]&&n.$refs["listenerFormRef"].clearValidate()}))},removeListener:function(e,t){var n=this;this.$confirm("确认移除该监听器吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.bpmnElementListeners.splice(t,1),n.elementListenersList.splice(t,1),nt(n.bpmnElement,n.otherExtensionList.concat(n.bpmnElementListeners))})).catch((function(){return console.info("操作取消")}))},saveListenerConfig:function(){var e=this;return Object(u["a"])(Object(m["a"])().mark((function t(){var n,i,r,s;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["listenerFormRef"].validate();case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:s=Ye(e.listenerForm,!0,e.prefix),-1===e.editingListenerIndex?(e.bpmnElementListeners.push(s),e.elementListenersList.push(e.listenerForm)):(e.bpmnElementListeners.splice(e.editingListenerIndex,1,s),e.elementListenersList.splice(e.editingListenerIndex,1,e.listenerForm)),e.otherExtensionList=null!==(n=null===(i=e.bpmnElement.businessObject)||void 0===i||null===(i=i.extensionElements)||void 0===i||null===(i=i.values)||void 0===i?void 0:i.filter((function(t){return t.$type!=="".concat(e.prefix,":TaskListener")})))&&void 0!==n?n:[],nt(e.bpmnElement,e.otherExtensionList.concat(e.bpmnElementListeners)),e.listenerFormModelVisible=!1,e.listenerForm={};case 11:case"end":return t.stop()}}),t)})))()},openListenerFieldForm:function(e,t){var n=this;this.listenerFieldForm=e?JSON.parse(JSON.stringify(e)):{},this.editingListenerFieldIndex=e?t:-1,this.listenerFieldFormModelVisible=!0,this.$nextTick((function(){n.$refs["listenerFieldFormRef"]&&n.$refs["listenerFieldFormRef"].clearValidate()}))},saveListenerFiled:function(){var e=this;return Object(u["a"])(Object(m["a"])().mark((function t(){var n;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["listenerFieldFormRef"].validate();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:-1===e.editingListenerFieldIndex?(e.fieldsListOfListener.push(e.listenerFieldForm),e.listenerForm.fields.push(e.listenerFieldForm)):(e.fieldsListOfListener.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm),e.listenerForm.fields.splice(e.editingListenerFieldIndex,1,e.listenerFieldForm)),e.listenerFieldFormModelVisible=!1,e.$nextTick((function(){return e.listenerFieldForm={}}));case 8:case"end":return t.stop()}}),t)})))()},removeListenerField:function(e,t){var n=this;this.$confirm("确认移除该字段吗？","提示",{confirmButtonText:"确 认",cancelButtonText:"取 消"}).then((function(){n.fieldsListOfListener.splice(t,1),n.listenerForm.fields.splice(t,1)})).catch((function(){return console.info("操作取消")}))}}},It=At,Ot=Object(D["a"])(It,Tt,Ct,!1,null,null,null),Lt=Ot.exports,Mt={name:"BpmnPropertiesPanel",components:{UserTaskListeners:Lt,ElementForm:kt,ElementProperties:gt,ElementListeners:ut,SignalAndMassage:Ze,FlowCondition:Ue,ElementMultiInstance:Be,ElementTask:Le,ElementOtherConfig:H,ElementBaseInfo:q},componentName:"BpmnPropertiesPanel",props:{bpmnModeler:Object,prefix:{type:String,default:"camunda"},width:{type:Number,default:480},idEditDisabled:{type:Boolean,default:!1}},provide:function(){return{prefix:this.prefix,width:this.width}},data:function(){return{activeTab:"base",elementId:"",elementType:"",elementBusinessObject:{},conditionFormVisible:!1,formVisible:!1}},watch:{elementId:{handler:function(){this.activeTab="base"}}},created:function(){this.initModels()},methods:{initModels:function(){var e=this;this.bpmnModeler?(this.timer&&clearTimeout(this.timer),window.bpmnInstances={modeler:this.bpmnModeler,modeling:this.bpmnModeler.get("modeling"),moddle:this.bpmnModeler.get("moddle"),eventBus:this.bpmnModeler.get("eventBus"),bpmnFactory:this.bpmnModeler.get("bpmnFactory"),elementFactory:this.bpmnModeler.get("elementFactory"),elementRegistry:this.bpmnModeler.get("elementRegistry"),replace:this.bpmnModeler.get("replace"),selection:this.bpmnModeler.get("selection")},this.getActiveElement()):this.timer=setTimeout((function(){return e.initModels()}),10)},getActiveElement:function(){var e=this;this.initFormOnChanged(null),this.bpmnModeler.on("import.done",(function(t){e.initFormOnChanged(null)})),this.bpmnModeler.on("selection.changed",(function(t){var n=t.newSelection;e.initFormOnChanged(n[0]||null)})),this.bpmnModeler.on("element.changed",(function(t){var n=t.element;n&&n.id===e.elementId&&e.initFormOnChanged(n)}))},initFormOnChanged:function(e){var t,n=e;n||(n=null!==(t=window.bpmnInstances.elementRegistry.find((function(e){return"bpmn:Process"===e.type})))&&void 0!==t?t:window.bpmnInstances.elementRegistry.find((function(e){return"bpmn:Collaboration"===e.type})));n&&(console.log("\n              ----------\n      select element changed:\n                id:  ".concat(n.id,"\n              type:  ").concat(n.businessObject.$type,"\n              ----------\n              ")),console.log("businessObject: ",n.businessObject),window.bpmnInstances.bpmnElement=n,this.bpmnElement=n,this.elementId=n.id,this.elementType=n.type.split(":")[1]||"",this.elementBusinessObject=JSON.parse(JSON.stringify(n.businessObject)),this.conditionFormVisible=!("SequenceFlow"!==this.elementType||!n.source||-1!==n.source.type.indexOf("StartEvent")),this.formVisible="UserTask"===this.elementType||"StartEvent"===this.elementType)},beforeDestroy:function(){window.bpmnInstances=null}}},Dt=Mt,Pt=Object(D["a"])(Dt,B,$,!1,null,null,null),_t=Pt.exports;_t.install=function(e){e.component(_t.name,_t)};var jt=_t,Bt=n("87f2"),$t=n("7a6b"),Rt=n("dbc8"),Nt=n("145d"),Vt=n("cf0a"),zt=n("78f9");function Ut(e,t,n,i,r,s,a,o,l,p,c,m,u){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=s,this._connect=a,this._create=o,this._popupMenu=l,this._canvas=p,this._rules=c,this._translate=m,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context,n=t.shape;if(Object(zt["a"])(e)&&i.isOpen(n)){var r=i.getEntries(n);r.replace&&r.replace.action.click(e,n)}}))}function qt(e,t,n){var i=e.$instanceOf(t),r=!1,s=e.eventDefinitions||[];return Object(Bt["forEach"])(s,(function(e){e.$type===n&&(r=!0)})),i&&r}Ut.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","elementRegistry"],Ut.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,s=this._create,a=this._popupMenu,o=this._canvas,l=this._rules,p=this._autoPlace,c=this._translate,m={};if("label"===e.type)return m;var u=e.businessObject;function d(e,t){r.start(e,t)}function f(){n.removeElements([e])}function b(e){var n=5,i=o.getContainer(),r=t.getPad(e).html,s=i.getBoundingClientRect(),a=r.getBoundingClientRect(),l=a.top-s.top,p=a.left-s.left,c={x:p,y:l+a.height+n};return c}function h(e,t,n,r){function a(t,n){var a=i.createShape(Object(Bt["assign"])({type:e},r));s.start(t,a,{source:n})}"string"!==typeof n&&(r=n,n=c("Append {type}",{type:e.replace(/^bpmn:/,"")}));var o=p?function(t,n){var s=i.createShape(Object(Bt["assign"])({type:e},r));p.append(n,s)}:a;return{group:"model",className:t,title:n,action:{dragstart:a,click:o}}}function y(e){return function(i,r){n.splitLane(r,e),t.open(r,!0)}}if(Object(Nt["b"])(u,["bpmn:Lane","bpmn:Participant"])&&Object(Rt["f"])(u)){var g=Object(Vt["d"])(e);Object(Bt["assign"])(m,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:c("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),g.length<2&&(e.height>=120&&Object(Bt["assign"])(m,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:c("Divide into two Lanes"),action:{click:y(2)}}}),e.height>=180&&Object(Bt["assign"])(m,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:c("Divide into three Lanes"),action:{click:y(3)}}})),Object(Bt["assign"])(m,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:c("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object($t["is"])(u,"bpmn:FlowNode")&&(Object($t["is"])(u,"bpmn:EventBasedGateway")?Object(Bt["assign"])(m,{"append.receive-task":h("bpmn:ReceiveTask","bpmn-icon-receive-task",c("Append ReceiveTask")),"append.message-intermediate-event":h("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",c("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":h("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",c("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":h("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",c("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":h("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",c("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):qt(u,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(Bt["assign"])(m,{"append.compensation-activity":h("bpmn:Task","bpmn-icon-task",c("Append compensation activity"),{isForCompensation:!0})}):Object($t["is"])(u,"bpmn:EndEvent")||u.isForCompensation||qt(u,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(Rt["e"])(u)||Object(Bt["assign"])(m,{"append.end-event":h("bpmn:EndEvent","bpmn-icon-end-event-none",c("Append EndEvent")),"append.gateway":h("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",c("Append Gateway")),"append.append-task":h("bpmn:UserTask","bpmn-icon-user-task",c("Append Task")),"append.intermediate-event":h("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",c("Append Intermediate/Boundary Event"))})),a.isEmpty(e,"bpmn-replace")||Object(Bt["assign"])(m,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:c("Change type"),action:{click:function(e,t){var n=Object(Bt["assign"])(b(t),{cursor:{x:e.x,y:e.y}});a.open(t,"bpmn-replace",n)}}}}),Object(Nt["b"])(u,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(Bt["assign"])(m,{"append.text-annotation":h("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using "+(u.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:d,dragstart:d}}}),Object(Nt["b"])(u,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(Bt["assign"])(m,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using DataInputAssociation"),action:{click:d,dragstart:d}}}),Object($t["is"])(u,"bpmn:Group")&&Object(Bt["assign"])(m,{"append.text-annotation":h("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var v=l.allowed("elements.delete",{elements:[e]});return Object(Bt["isArray"])(v)&&(v=v[0]===e),v&&Object(Bt["assign"])(m,{delete:{group:"edit",className:"bpmn-icon-trash",title:c("Remove"),action:{click:f}}}),m};var Jt={__init__:["contextPadProvider"],contextPadProvider:["type",Ut]},Gt=n("4bee"),Kt=n("35be"),Xt=n("194a"),Zt=n("61f73"),Ht=n("c4ba"),Wt=n("665f"),Qt=n("b71e");function Yt(e,t,n,i,r,s,a,o){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=s,this._globalConnect=a,this._translate=o,e.registerProvider(this)}Yt.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Yt.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,s=this._handTool,a=this._globalConnect,o=this._translate;function l(e,i,r,s,a){function l(i){var r=n.createShape(Object(Bt["assign"])({type:e},a));a&&(r.businessObject.di.isExpanded=a.isExpanded),t.start(i,r)}var p=e.replace(/^bpmn:/,"");return{group:i,className:r,title:s||o("Create {type}",{type:p}),action:{dragstart:l,click:l}}}function p(e){var i=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),r=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:i});t.start(e,[i,r],{hints:{autoSelect:[r]}})}function c(e){t.start(e,n.createParticipantShape())}return Object(Bt["assign"])(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:o("Activate the hand tool"),action:{click:function(e){s.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:o("Activate the lasso tool"),action:{click:function(e){r.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:o("Activate the create/remove space tool"),action:{click:function(e){i.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:o("Activate the global connect tool"),action:{click:function(e){a.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",o("Create StartEvent")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",o("Create Intermediate/Boundary Event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",o("Create EndEvent")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",o("Create Gateway")),"create.user-task":l("bpmn:UserTask","activity","bpmn-icon-user-task",o("Create User Task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",o("Create DataObjectReference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",o("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:o("Create expanded SubProcess"),action:{dragstart:p,click:p}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:o("Create Pool/Participant"),action:{dragstart:c,click:c}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",o("Create Group"))}),e};var en={__depends__:[Gt["a"],Kt["a"],Xt["a"],Zt["a"],Ht["a"],Wt["a"],Qt["a"]],__init__:["paletteProvider"],paletteProvider:["type",Yt]},tn=n("7fdd");n("9123");l["default"].use(tn["vuePlugin"]);var nn={name:"ProcessDesigner",props:{bpmnXml:{type:String,required:!0},designerForm:{type:Object,required:!0}},components:{BpmnProcessDesigner:j,BmpnProcessPenal:jt},data:function(){return{height:document.documentElement.clientHeight-94.5+"px;",xmlString:this.bpmnXml,modeler:null,controlForm:{processId:this.designerForm.processKey||"",processName:this.designerForm.processName||"",namespace:this.designerForm.category||"",simulation:!1,labelEditing:!1,labelVisible:!1,prefix:"flowable",headerButtonSize:"small",additionalModel:[Jt,en]}}},methods:{elementClick:function(e){this.element=e},initModeler:function(e){var t=this;setTimeout((function(){t.modeler=e}),10)},handlerEvent:function(e,t){},onSaveProcess:function(e){this.$emit("save",e)}}},rn=nn,sn=(n("0034"),Object(D["a"])(rn,a,o,!1,null,null,null)),an=sn.exports,on={name:"ModelDesign",components:{ProcessDesigner:an},data:function(){return{designerData:{title:"",loading:!1,bpmnXml:"",modelId:null,form:{processName:null,processKey:null,namespace:null}}}},created:function(){var e=this.$cache.session.getJSON("designerData");if(!e)return this.$modal.msgWarning("没有数据，为你返回流程设计列表"),void this.$router.replace("/process/model");this.designerData=e,this.$store.state.app.sidebar.opened&&this.$store.dispatch("app/toggleSideBar")},methods:{onSaveDesigner:function(e){var t=this,n={modelId:this.designerData.modelId,bpmnXml:e};this.$confirm("是否将此模型保存为新版本？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否"}).then((function(){t.confirmSave(n,!0)})).catch((function(e){"cancel"===e&&t.confirmSave(n,!1)}))},confirmSave:function(e,t){var n=this;this.designerData.loading=!0,Object(s["h"])(Object.assign(e,{newVersion:t})).then((function(){n.$tab.closeOpenPage({path:"/process/model"})})).finally((function(){n.designerData.loading=!1}))}}},ln=on,pn=Object(D["a"])(ln,i,r,!1,null,null,null);t["default"]=pn.exports},3528:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"j",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return c})),n.d(t,"b",(function(){return m})),n.d(t,"l",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return h}));var i=n("b775");function r(e){return Object(i["a"])({url:"/system/role/list",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/system/role/"+e,method:"get"})}function a(e){return Object(i["a"])({url:"/system/role",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/system/role",method:"put",data:e})}function l(e){return Object(i["a"])({url:"/system/role/dataScope",method:"put",data:e})}function p(e,t){var n={roleId:e,status:t};return Object(i["a"])({url:"/system/role/changeStatus",method:"put",data:n})}function c(e){return Object(i["a"])({url:"/system/role/"+e,method:"delete"})}function m(e){return Object(i["a"])({url:"/system/role/authUser/allocatedList",method:"get",params:e})}function u(e){return Object(i["a"])({url:"/system/role/authUser/unallocatedList",method:"get",params:e})}function d(e){return Object(i["a"])({url:"/system/role/authUser/cancel",method:"put",data:e})}function f(e){return Object(i["a"])({url:"/system/role/authUser/cancelAll",method:"put",params:e})}function b(e){return Object(i["a"])({url:"/system/role/authUser/selectAll",method:"put",params:e})}function h(e){return Object(i["a"])({url:"/system/role/deptTree/"+e,method:"get"})}},"39a7":function(e,t,n){"use strict";n("d3b7"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,r={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function s(e,t){return e&&"function"===typeof e.$instanceOf&&e.$instanceOf(t)}function a(e){return e&&e.length}function o(e,t){return a(e)&&i(e,(function(e){return s(e,t)}))}function l(e,t){return i(t,(function(t){return s(e,t)}))}function p(e,t,n){var i=t.name,s=r[i.replace(/flowable:/,"")];return i===e&&l(n,s)}function c(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}c.$inject=["eventBus"],c.prototype.canCloneProperty=function(e,t){return p("flowable:FailedJobRetryTimeCycle",t,e)?o(e.eventDefinitions,"bpmn:TimerEventDefinition")||o(e.eventDefinitions,"bpmn:SignalEventDefinition")||s(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):p("flowable:Connector",t,e)||p("flowable:Field",t,e)?o(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=c},"3eeb":function(e,t,n){"use strict";n("d3b7"),n("b0c0"),n("ac1f"),n("5319");var i=n("87f2").some,r={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function s(e,t){return e&&"function"===typeof e.$instanceOf&&e.$instanceOf(t)}function a(e){return e&&e.length}function o(e,t){return a(e)&&i(e,(function(e){return s(e,t)}))}function l(e,t){return i(t,(function(t){return s(e,t)}))}function p(e,t,n){var i=t.name,s=r[i.replace(/activiti:/,"")];return i===e&&l(n,s)}function c(e){e.on("property.clone",(function(e){var t=e.newElement,n=e.propertyDescriptor;this.canCloneProperty(t,n)}),this)}c.$inject=["eventBus"],c.prototype.canCloneProperty=function(e,t){return p("activiti:FailedJobRetryTimeCycle",t,e)?o(e.eventDefinitions,"bpmn:TimerEventDefinition")||o(e.eventDefinitions,"bpmn:SignalEventDefinition")||s(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):p("activiti:Connector",t,e)||p("activiti:Field",t,e)?o(e.eventDefinitions,"bpmn:MessageEventDefinition"):void 0},e.exports=c},"46e9":function(e,t,n){"use strict";n("d3b7");var i=n("87f2").isFunction,r=n("87f2").isObject,s=n("87f2").some,a="*";function o(e){var t=this;e.on("moddleCopy.canCopyProperty",(function(e){var n=e.property,i=e.parent;return t.canCopyProperty(n,i)}))}function l(e,t){return e&&i(e.$instanceOf)&&e.$instanceOf(t)}function p(e,t){return s(t,(function(t){return l(e,t)}))}function c(e,t){return t?l(e,t)?e:e.$parent?c(e.$parent,t):void 0:e.$parent}function m(e,t){var n=e.$type&&e.$model.getTypeDescriptor(e.$type),i=n&&n.meta&&n.meta.allowedIn;return!(i&&!u(i))||s(i,(function(e){return c(t,e)}))}function u(e){return-1!==e.indexOf(a)}o.$inject=["eventBus"],o.prototype.canCopyProperty=function(e,t){return!(r(e)&&!m(e,t))&&(!(l(e,"camunda:InputOutput")&&!this.canHostInputOutput(t))&&(!(p(e,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(t))&&(!(l(e,"camunda:In")&&!this.canHostIn(t))&&void 0)))},o.prototype.canHostInputOutput=function(e){var t=c(e,"camunda:Connector");if(t)return!0;var n=c(e,"bpmn:FlowNode");return!!n&&(!p(n,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])&&(!l(n,"bpmn:SubProcess")||!n.get("triggeredByEvent")))},o.prototype.canHostConnector=function(e){var t=c(e,"camunda:ServiceTaskLike");return!l(t,"bpmn:MessageEventDefinition")||(c(e,"bpmn:IntermediateThrowEvent")||c(e,"bpmn:EndEvent"))},o.prototype.canHostIn=function(e){var t=c(e,"bpmn:CallActivity");if(t)return!0;var n=c(e,"bpmn:SignalEventDefinition");return!n||(c(e,"bpmn:IntermediateThrowEvent")||c(e,"bpmn:EndEvent"))},e.exports=o},6282:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return u}));var i=n("b775");function r(e){return Object(i["a"])({url:"/workflow/model/list",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/workflow/model/historyList",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/workflow/model",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/workflow/model",method:"put",data:e})}function l(e){return Object(i["a"])({url:"/workflow/model/save",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/workflow/model/latest",method:"post",params:e})}function c(e){return Object(i["a"])({url:"/workflow/model/"+e,method:"delete"})}function m(e){return Object(i["a"])({url:"/workflow/model/deploy",method:"post",params:e})}function u(e){return Object(i["a"])({url:"/workflow/model/bpmnXml/"+e,method:"get"})}},"7c3b":function(e,t,n){},"7fdd":function(e,t,n){var i=n("1020");i.registerLanguage("xml",n("8dcb")),i.registerLanguage("json",n("5ad2")),e.exports=i},9446:function(e,t,n){e.exports={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",n("39a7")]}},"9f7d":function(e,t,n){},b1b0:function(e,t,n){},ba35:function(e,t,n){"use strict";e.exports={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",n("46e9")]}},bf96:function(e,t,n){e.exports={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",n("3eeb")]}},c0c7:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"l",(function(){return p})),n.d(t,"c",(function(){return c})),n.d(t,"i",(function(){return m})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"d",(function(){return v}));var i=n("b775"),r=n("c38a");function s(e){return Object(i["a"])({url:"/system/user/list",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/system/user/list",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/system/user/"+Object(r["e"])(e),method:"get"})}function l(e){return Object(i["a"])({url:"/system/user",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(i["a"])({url:"/system/user/"+e,method:"delete"})}function m(e,t){var n={userId:e,password:t};return Object(i["a"])({url:"/system/user/resetPwd",method:"put",data:n})}function u(e,t){var n={userId:e,status:t};return Object(i["a"])({url:"/system/user/changeStatus",method:"put",data:n})}function d(){return Object(i["a"])({url:"/system/user/profile",method:"get"})}function f(e){return Object(i["a"])({url:"/system/user/profile",method:"put",data:e})}function b(e,t){var n={oldPassword:e,newPassword:t};return Object(i["a"])({url:"/system/user/profile/updatePwd",method:"put",params:n})}function h(e){return Object(i["a"])({url:"/system/user/profile/avatar",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/system/user/authRole/"+e,method:"get"})}function g(e){return Object(i["a"])({url:"/system/user/authRole",method:"put",params:e})}function v(){return Object(i["a"])({url:"/system/user/deptTree",method:"get"})}},d468:function(e,t,n){"use strict";n("b1b0")},da4e:function(e){e.exports=JSON.parse('{"name":"Activiti","uri":"http://activiti.org/bpmn","prefix":"activiti","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","activiti:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"activiti:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true},{"name":"executionListener","isAbstract":true,"type":"Expression"}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"multiinstance_type","superClass":["Element"]},{"name":"multiinstance_condition","superClass":["Element"]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"},{"name":"multiinstance_condition","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["activiti:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","activiti:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","activiti:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["activiti:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ExtensionElements","properties":[{"name":"operationList","type":"String","isAttr":true}]},{"name":"OperationList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"operationList","type":"FormOperation","isMany":true}]},{"name":"FormOperation","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"showOrder","type":"String","isAttr":true},{"name":"multiSignAssignee","type":"String","isAttr":true}]},{"name":"VariableList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"variableList","type":"FormVariable","isMany":true}]},{"name":"FormVariable","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"DeptPostList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"deptPostList","type":"DeptPost","isMany":true}]},{"name":"DeptPost","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"postId","type":"String","isAttr":true},{"name":"deptPostId","type":"String","isAttr":true}]},{"name":"UserCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"CustomCondition","superClass":["Element"],"meta":{"allowedIn":["bpmn:SequenceFlow"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"operationType","type":"String","isAttr":true},{"name":"parallelRefuse","type":"Boolean","isAttr":true,"default":false}]},{"name":"AssigneeList","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"assigneeList","type":"Assignee","isMany":true},{"name":"type","type":"String","isAttr":true}]},{"name":"Assignee","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}],"emumerations":[]}')},e3ab:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n("b775");function r(e){return Object(i["a"])({url:"/workflow/form/list",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/workflow/form/"+e,method:"get"})}function a(e){return Object(i["a"])({url:"/workflow/form",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/workflow/form",method:"put",data:e})}function l(e){return Object(i["a"])({url:"/workflow/form/"+e,method:"delete"})}},eb6c:function(e,t,n){}}]);